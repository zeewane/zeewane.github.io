<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>zeewane</title>
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2017-07-04T02:35:40.339Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>戚志伟</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>2017-7-4</title>
    <link href="http://yoursite.com/2017/07/04/2017-7-4/"/>
    <id>http://yoursite.com/2017/07/04/2017-7-4/</id>
    <published>2017-07-04T02:25:32.000Z</published>
    <updated>2017-07-04T02:35:40.339Z</updated>
    
    <content type="html">&lt;h2 id=&quot;越来越暴躁的脾气&quot;&gt;&lt;a href=&quot;#越来越暴躁的脾气&quot; class=&quot;headerlink&quot; title=&quot;越来越暴躁的脾气&quot;&gt;&lt;/a&gt;越来越暴躁的脾气&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;可能就像当初群里说的那样，我没有做好承担这个责任的准备，我接受不了也通过不了这个考验。&lt;/li&gt;
&lt;li&gt;懦弱和逃避&lt;/li&gt;
&lt;li&gt;越来越不喜欢你了，只是心里憋的慌，可能对你说出来就不会有这么讨厌你，但是的确是越来越讨厌你了&lt;/li&gt;
&lt;li&gt;可能缘分和感情就这么被一年的时光磨蚀了，就是这么的脆弱&lt;/li&gt;
&lt;li&gt;最后的不作为和刻意的让你讨厌让你恨，这样就不会太内疚了&lt;/li&gt;
&lt;li&gt;我有爱好只是你不喜欢，我也希望有人能支持我做我喜欢的事情&lt;/li&gt;
&lt;li&gt;我只是不喜欢你懒的要死，宅在家里，却对我的消费指手画脚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;时间都去哪了&quot;&gt;&lt;a href=&quot;#时间都去哪了&quot; class=&quot;headerlink&quot; title=&quot;时间都去哪了&quot;&gt;&lt;/a&gt;时间都去哪了&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;一周又一周的过，不知不觉已经这么久，时间都用到哪里了。&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;越来越暴躁的脾气&quot;&gt;&lt;a href=&quot;#越来越暴躁的脾气&quot; class=&quot;headerlink&quot; title=&quot;越来越暴躁的脾气&quot;&gt;&lt;/a&gt;越来越暴躁的脾气&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;可能就像当初群里说的那样，我没有做好承担这个责任的准备，我接受不了也通过不了这个
    
    </summary>
    
      <category term="随笔" scheme="http://yoursite.com/categories/%E9%9A%8F%E7%AC%94/"/>
    
    
      <category term="心情" scheme="http://yoursite.com/tags/%E5%BF%83%E6%83%85/"/>
    
  </entry>
  
  <entry>
    <title>日志级别的选择</title>
    <link href="http://yoursite.com/2017/06/29/%E6%97%A5%E5%BF%97%E7%BA%A7%E5%88%AB%E7%9A%84%E9%80%89%E6%8B%A9/"/>
    <id>http://yoursite.com/2017/06/29/日志级别的选择/</id>
    <published>2017-06-29T09:26:21.000Z</published>
    <updated>2017-06-29T09:31:55.198Z</updated>
    
    <content type="html">&lt;h1 id=&quot;日志信息分类&quot;&gt;&lt;a href=&quot;#日志信息分类&quot; class=&quot;headerlink&quot; title=&quot;日志信息分类&quot;&gt;&lt;/a&gt;日志信息分类&lt;/h1&gt;&lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;重构消息中心客户端走进了不少的坑，日志帮了很多忙也带来了性能的问题，合理的控制日志级别，网上找的这篇写的还不错，希望自己以后能照着来做。&lt;/p&gt;
&lt;h2 id=&quot;1-等级&quot;&gt;&lt;a href=&quot;#1-等级&quot; class=&quot;headerlink&quot; title=&quot;1.等级&quot;&gt;&lt;/a&gt;1.等级&lt;/h2&gt;&lt;p&gt;由低到高：debug&amp;lt;info&amp;lt;warn&amp;lt;Error&amp;lt;Fatal;&lt;/p&gt;
&lt;h2 id=&quot;2-区别：&quot;&gt;&lt;a href=&quot;#2-区别：&quot; class=&quot;headerlink&quot; title=&quot;2.区别：&quot;&gt;&lt;/a&gt;2.区别：&lt;/h2&gt;&lt;p&gt;debug 级别最低，可以随意的使用于任何觉得有利于在调试时更详细的了解系统运行状态的东东；&lt;/p&gt;
&lt;p&gt;info  重要，输出信息：用来反馈系统的当前状态给最终用户的；&lt;/p&gt;
&lt;p&gt;后三个，警告、错误、严重错误，这三者应该都在系统运行时检测到了一个不正常的状态。&lt;/p&gt;
&lt;p&gt;warn, 可修复，系统可继续运行下去；&lt;/p&gt;
&lt;p&gt;Error, 可修复性，但无法确定系统会正常的工作下去;&lt;/p&gt;
&lt;p&gt;Fatal, 相当严重，可以肯定这种错误已经无法修复，并且如果系统继续运行下去的话后果严重。&lt;/p&gt;
&lt;h2 id=&quot;3-使用&quot;&gt;&lt;a href=&quot;#3-使用&quot; class=&quot;headerlink&quot; title=&quot;3.使用&quot;&gt;&lt;/a&gt;3.使用&lt;/h2&gt;&lt;p&gt;什么时候使用 info, warn , error ?&lt;/p&gt;
&lt;p&gt;info 用于打印程序应该出现的正常状态信息， 便于追踪定位；&lt;/p&gt;
&lt;p&gt;warn 表明系统出现轻微的不合理但不影响运行和使用；&lt;/p&gt;
&lt;p&gt;error 表明出现了系统错误和异常，无法正常完成目标操作。&lt;/p&gt;
&lt;h2 id=&quot;4-格式&quot;&gt;&lt;a href=&quot;#4-格式&quot; class=&quot;headerlink&quot; title=&quot;4.格式&quot;&gt;&lt;/a&gt;4.格式&lt;/h2&gt;&lt;p&gt;总结起来， 错误日志格式可以为：&lt;/p&gt;
&lt;p&gt;log.error(“[接口名或操作名] [Some Error Msg] happens. [params] [Probably Because]. [Probably need to do].”);&lt;/p&gt;
&lt;p&gt;log.error(String.format(“[接口名或操作名] [Some Error Msg] happens. [%s]. [Probably Because]. [Probably need to do].”, params));&lt;/p&gt;
&lt;p&gt;或&lt;/p&gt;
&lt;p&gt;log.error(“[Some Error Msg] happens to 错误参数或内容 when [in some condition]. [Probably Because]. [Probably need to do].”);&lt;/p&gt;
&lt;p&gt;log.error(String.format(“[Some Error Msg] happens to %s when [in some condition]. [Probably Because]. [Probably need to do].”, parameters));&lt;/p&gt;
&lt;p&gt;[Probably Reason]. [Probably need to do]. 在某些情况下可以省略； 在一些重要接口和场景下最好能说明一下。&lt;/p&gt;
&lt;p&gt;每一条错误日志都是独立的，尽可能完整、具体、直接说明何种场景下发生了什么错误，由什么原因导致，要采用什么措施或步骤。&lt;/p&gt;
&lt;h2 id=&quot;5-意义&quot;&gt;&lt;a href=&quot;#5-意义&quot; class=&quot;headerlink&quot; title=&quot;5.意义&quot;&gt;&lt;/a&gt;5.意义&lt;/h2&gt;&lt;p&gt;错误日志是排查问题的重要手段之一。 当我们编程实现一项功能时， 通常会考虑可能发生的各种错误及相应原因：&lt;/p&gt;
&lt;p&gt;要排查出相应的原因， 就需要一些关键描述来定位原因。这就会形成三元组：错误现象 -&amp;gt; 错误关键描述 -&amp;gt; 最终的错误原因。&lt;/p&gt;
&lt;p&gt;需要针对每一种错误尽可能提供相应的错误关键描述，从而定位到相应的错误原因。也就是说，编程的时候，要仔细思考， 哪些描述是非常有利于定位错误原因的， 尽可能将这些描述添加到错误日志中。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;日志信息分类&quot;&gt;&lt;a href=&quot;#日志信息分类&quot; class=&quot;headerlink&quot; title=&quot;日志信息分类&quot;&gt;&lt;/a&gt;日志信息分类&lt;/h1&gt;&lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;
    
    </summary>
    
      <category term="基础" scheme="http://yoursite.com/categories/%E5%9F%BA%E7%A1%80/"/>
    
    
      <category term="log4j" scheme="http://yoursite.com/tags/log4j/"/>
    
  </entry>
  
  <entry>
    <title>纪念即将逝去的多说</title>
    <link href="http://yoursite.com/2017/03/23/%E7%BA%AA%E5%BF%B5%E5%8D%B3%E5%B0%86%E9%80%9D%E5%8E%BB%E7%9A%84%E5%A4%9A%E8%AF%B4/"/>
    <id>http://yoursite.com/2017/03/23/纪念即将逝去的多说/</id>
    <published>2017-03-23T07:55:30.000Z</published>
    <updated>2017-03-23T07:55:30.923Z</updated>
    
    <content type="html"></content>
    
    <summary type="html">
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>code tips</title>
    <link href="http://yoursite.com/2017/02/13/code-tips/"/>
    <id>http://yoursite.com/2017/02/13/code-tips/</id>
    <published>2017-02-13T06:48:28.000Z</published>
    <updated>2017-02-13T07:00:15.629Z</updated>
    
    <content type="html">&lt;ul&gt;
&lt;li&gt;&lt;p&gt;对bean操作，有现成的工具类，apache的common-beanutils包&lt;/p&gt;
&lt;figure class=&quot;highlight xml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;dependency&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;groupId&lt;/span&gt;&amp;gt;&lt;/span&gt;commons-beanutils&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;groupId&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;artifactId&lt;/span&gt;&amp;gt;&lt;/span&gt;commons-beanutils&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;artifactId&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;version&lt;/span&gt;&amp;gt;&lt;/span&gt;1.9.2&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;version&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;dependency&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;对xml操作，有现成的工具类，dome4j很好用&lt;/p&gt;
&lt;figure class=&quot;highlight xml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;dependency&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;groupId&lt;/span&gt;&amp;gt;&lt;/span&gt;dom4j&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;groupId&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;artifactId&lt;/span&gt;&amp;gt;&lt;/span&gt;dom4j&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;artifactId&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;version&lt;/span&gt;&amp;gt;&lt;/span&gt;1.6.1&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;version&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;dependency&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;ul&gt;
&lt;li&gt;&lt;p&gt;对bean操作，有现成的工具类，apache的common-beanutils包&lt;/p&gt;
&lt;figure class=&quot;highlight xml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;
    
    </summary>
    
      <category term="基础" scheme="http://yoursite.com/categories/%E5%9F%BA%E7%A1%80/"/>
    
    
      <category term="编码技巧" scheme="http://yoursite.com/tags/%E7%BC%96%E7%A0%81%E6%8A%80%E5%B7%A7/"/>
    
  </entry>
  
  <entry>
    <title>bat批处理脚本简单使用</title>
    <link href="http://yoursite.com/2017/02/10/bat%E6%89%B9%E5%A4%84%E7%90%86%E8%84%9A%E6%9C%AC%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/"/>
    <id>http://yoursite.com/2017/02/10/bat批处理脚本简单使用/</id>
    <published>2017-02-10T01:08:15.000Z</published>
    <updated>2017-02-10T01:26:17.946Z</updated>
    
    <content type="html">&lt;h2 id=&quot;关键词&quot;&gt;&lt;a href=&quot;#关键词&quot; class=&quot;headerlink&quot; title=&quot;关键词&quot;&gt;&lt;/a&gt;关键词&lt;/h2&gt;&lt;h3 id=&quot;echo-off&quot;&gt;&lt;a href=&quot;#echo-off&quot; class=&quot;headerlink&quot; title=&quot;@echo off&quot;&gt;&lt;/a&gt;@echo off&lt;/h3&gt;&lt;p&gt;这个是用来关闭代码回显的，本来在bat脚本执行中，所有的代码在运行过程中都会将代码打印在控制台上，&lt;br&gt;设置成echo off后，代码就不会打印在控制台上了，加上@符号，连echo off这句话也不会显示。&lt;/p&gt;
&lt;h3 id=&quot;pause&quot;&gt;&lt;a href=&quot;#pause&quot; class=&quot;headerlink&quot; title=&quot;pause&quot;&gt;&lt;/a&gt;pause&lt;/h3&gt;&lt;p&gt;暂停功能，不写这个的话，代码会执行完后马上就退出控制台，一般的代码执行较快，直接就一闪而过，&lt;br&gt;加入pause后，会提示，按任意键继续，这样就暂停在这边了。&lt;/p&gt;
&lt;h3 id=&quot;title&quot;&gt;&lt;a href=&quot;#title&quot; class=&quot;headerlink&quot; title=&quot;title&quot;&gt;&lt;/a&gt;title&lt;/h3&gt;&lt;p&gt;点击bat后弹出来的dos框的名字，记得用记事本打开bat脚本，然后另存为编码选择为ANSI，这样就可以&lt;br&gt;正常显示中文了，不然title里的中文是乱码的。&lt;/p&gt;
&lt;h3 id=&quot;时间&quot;&gt;&lt;a href=&quot;#时间&quot; class=&quot;headerlink&quot; title=&quot;时间&quot;&gt;&lt;/a&gt;时间&lt;/h3&gt;&lt;p&gt;%date% 显示当前日期，会有周几的显示&lt;br&gt;%time% 显示当前的时间，精确到毫秒&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;关键词&quot;&gt;&lt;a href=&quot;#关键词&quot; class=&quot;headerlink&quot; title=&quot;关键词&quot;&gt;&lt;/a&gt;关键词&lt;/h2&gt;&lt;h3 id=&quot;echo-off&quot;&gt;&lt;a href=&quot;#echo-off&quot; class=&quot;headerlink&quot; title=&quot;@echo
    
    </summary>
    
      <category term="脚本" scheme="http://yoursite.com/categories/%E8%84%9A%E6%9C%AC/"/>
    
    
      <category term="bat" scheme="http://yoursite.com/tags/bat/"/>
    
  </entry>
  
  <entry>
    <title>北京第一天</title>
    <link href="http://yoursite.com/2017/01/31/%E5%8C%97%E4%BA%AC%E7%AC%AC%E4%B8%80%E5%A4%A9/"/>
    <id>http://yoursite.com/2017/01/31/北京第一天/</id>
    <published>2017-01-31T12:04:41.000Z</published>
    <updated>2017-01-31T12:24:10.000Z</updated>
    
    <content type="html">&lt;p&gt;14个小时的硬卧出乎意料的舒服，除了吃饭有点麻烦，床躺着还是很软很舒服的。&lt;/p&gt;
&lt;p&gt;故宫比想象中的要大的多，但是也只是一开始的兴奋，没有那么好玩。&lt;/p&gt;
&lt;p&gt;北京的地铁是真痛苦啊，换乘要走这么多的路。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;14个小时的硬卧出乎意料的舒服，除了吃饭有点麻烦，床躺着还是很软很舒服的。&lt;/p&gt;
&lt;p&gt;故宫比想象中的要大的多，但是也只是一开始的兴奋，没有那么好玩。&lt;/p&gt;
&lt;p&gt;北京的地铁是真痛苦啊，换乘要走这么多的路。&lt;/p&gt;

    
    </summary>
    
      <category term="游记" scheme="http://yoursite.com/categories/%E6%B8%B8%E8%AE%B0/"/>
    
    
      <category term="北京" scheme="http://yoursite.com/tags/%E5%8C%97%E4%BA%AC/"/>
    
  </entry>
  
  <entry>
    <title>出发去北京啦！</title>
    <link href="http://yoursite.com/2017/01/30/%E5%87%BA%E5%8F%91%E5%8E%BB%E5%8C%97%E4%BA%AC%E5%95%A6%EF%BC%81/"/>
    <id>http://yoursite.com/2017/01/30/出发去北京啦！/</id>
    <published>2017-01-30T00:13:10.000Z</published>
    <updated>2017-01-30T00:16:23.000Z</updated>
    
    <content type="html">&lt;p&gt;下午就要去坐火车了，紧张，第一次出远门，还是带着家里这么多人一起，压力好大，希望一切顺利，我现在都还没研究过到了那边怎么玩，而且我手机要没流量了。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;下午就要去坐火车了，紧张，第一次出远门，还是带着家里这么多人一起，压力好大，希望一切顺利，我现在都还没研究过到了那边怎么玩，而且我手机要没流量了。&lt;/p&gt;

    
    </summary>
    
      <category term="游记" scheme="http://yoursite.com/categories/%E6%B8%B8%E8%AE%B0/"/>
    
    
      <category term="北京" scheme="http://yoursite.com/tags/%E5%8C%97%E4%BA%AC/"/>
    
  </entry>
  
  <entry>
    <title>jacoco-ant执行脚本</title>
    <link href="http://yoursite.com/2017/01/03/jacoco-ant%E6%89%A7%E8%A1%8C%E8%84%9A%E6%9C%AC/"/>
    <id>http://yoursite.com/2017/01/03/jacoco-ant执行脚本/</id>
    <published>2017-01-03T09:38:50.000Z</published>
    <updated>2017-01-03T09:41:17.000Z</updated>
    
    <content type="html">&lt;figure class=&quot;highlight xml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;19&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;20&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;21&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;22&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;23&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;24&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;25&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;26&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;27&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;28&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;29&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;30&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;31&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;32&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;33&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;34&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;35&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;36&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;37&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;38&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;39&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;40&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;41&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;42&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;43&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;44&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;45&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;46&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;47&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;48&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;49&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;50&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;51&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;52&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;53&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;54&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;55&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;56&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;57&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;58&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;59&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;60&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;61&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&amp;lt;?xml version=&quot;1.0&quot; ?&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;project&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;Test&quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;xmlns:jacoco&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;antlib:org.jacoco.ant&quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;default&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;jacoco&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;&amp;lt;!--Jacoco的安装路径--&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;jacocoantPath&quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;value&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;/usr/jacoco/lib/jacocoant.jar&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;comment&quot;&gt;&amp;lt;!--最终生成.exec文件的路径，Jacoco就是根据这个文件生成最终的报告的--&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;jacocoexecPath&quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;value&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;/home/work/local/hundsun/workspace/wg_merchant_oc_regression/jacoco.exec&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;&amp;lt;!--生成覆盖率报告的路径，直接放在tomct下面，外界直接访问--&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;reportfolderPath&quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;value&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;/root/Tomcat_test/webapps/report&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;comment&quot;&gt;&amp;lt;!--远程tomcat服务的ip地址--&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;server_ip&quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;value&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;127.0.0.1&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;comment&quot;&gt;&amp;lt;!--前面配置的远程tomcat服务打开的端口，要跟上面配置的一样--&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;comment&quot;&gt;&amp;lt;!--这个端口有别于tomcat的端口，相当于是嵌在tomcat里的监视器--&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;server_port&quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;value&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;8088&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;comment&quot;&gt;&amp;lt;!--源代码路径--&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;checkOrderSrcpath&quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;value&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;/root/LoginDemo4/src/main/java/&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;comment&quot;&gt;&amp;lt;!--可以配置多个源代码，源代码的路径就是src/main/java下面--&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;comment&quot;&gt;&amp;lt;!--.class文件路径--&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;comment&quot;&gt;&amp;lt;!--跑的是class，标注的是源码？--&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;checkOrderClasspath&quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;value&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;/root/LoginDemo4/target/classes/com/hundsun&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;comment&quot;&gt;&amp;lt;!--让ant知道去哪儿找Jacoco--&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;taskdef&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;uri&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;antlib:org.jacoco.ant&quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;resource&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;org/jacoco/ant/antlib.xml&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;classpath&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;path&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;$&amp;#123;jacocoantPath&amp;#125;&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;taskdef&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;comment&quot;&gt;&amp;lt;!--dump任务:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      根据前面配置的ip地址，和端口号，&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      访问目标tomcat服务，并生成.exec文件。--&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;target&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;dump&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;jacoco:dump&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;address&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;$&amp;#123;server_ip&amp;#125;&quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;reset&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;false&quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;destfile&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;$&amp;#123;jacocoexecPath&amp;#125;&quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;port&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;$&amp;#123;server_port&amp;#125;&quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;append&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;true&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;target&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;comment&quot;&gt;&amp;lt;!--jacoco任务:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      根据前面配置的源代码路径和.class文件路径，&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      根据dump后，生成的.exec文件，生成最终的html覆盖率报告。--&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;target&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;report&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;delete&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;dir&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;$&amp;#123;reportfolderPath&amp;#125;&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;mkdir&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;dir&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;$&amp;#123;reportfolderPath&amp;#125;&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;jacoco:report&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;          &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;executiondata&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;              &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;file&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;file&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;$&amp;#123;jacocoexecPath&amp;#125;&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;          &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;executiondata&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;              &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;          &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;structure&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;JaCoCo Report&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;              &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;group&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;Check Order related&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;           &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;classfiles&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                      &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;fileset&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;dir&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;$&amp;#123;checkOrderClasspath&amp;#125;&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                  &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;classfiles&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;sourcefiles&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;encoding&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;gbk&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                      &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;fileset&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;dir&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;$&amp;#123;checkOrderSrcpath&amp;#125;&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                  &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;sourcefiles&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;              &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;group&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;          &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;structure&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;          &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;html&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;destdir&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;$&amp;#123;reportfolderPath&amp;#125;&quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;encoding&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;utf-8&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;         &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;jacoco:report&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;target&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;project&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</content>
    
    <summary type="html">
    
      &lt;figure class=&quot;highlight xml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;
    
    </summary>
    
      <category term="tools" scheme="http://yoursite.com/categories/tools/"/>
    
    
      <category term="jacoco" scheme="http://yoursite.com/tags/jacoco/"/>
    
  </entry>
  
  <entry>
    <title>2016总结</title>
    <link href="http://yoursite.com/2017/01/01/2016%E6%80%BB%E7%BB%93/"/>
    <id>http://yoursite.com/2017/01/01/2016总结/</id>
    <published>2017-01-01T06:48:27.000Z</published>
    <updated>2017-02-07T01:02:33.555Z</updated>
    
    <content type="html">&lt;h2 id=&quot;Perface&quot;&gt;&lt;a href=&quot;#Perface&quot; class=&quot;headerlink&quot; title=&quot;Perface&quot;&gt;&lt;/a&gt;Perface&lt;/h2&gt;&lt;p&gt;2016年马上就要结束了，这可能是我活到现在最跌宕起伏的一年，这一年里发生了太多太多的事情，做了太多太多的抉择，时间按下了一个快进键。&lt;/p&gt;
&lt;h2 id=&quot;Part-1&quot;&gt;&lt;a href=&quot;#Part-1&quot; class=&quot;headerlink&quot; title=&quot;Part 1&quot;&gt;&lt;/a&gt;Part 1&lt;/h2&gt;&lt;p&gt;这个学期初突然发现有机会去争取奖学金，大三上我以为考的很差劲，但是离三等最低的那条线也没有差很远，大三下也是我最后的机会去努力，同时为接下来的实习找工作做准备。大三上，大概2015年12月的时候拿了一个外包比赛的奖，以为牛逼的不得了，毕竟之前什么学科竞赛啊科研都没接触过，唯一做过的系统还是大三开始前的那个短学期的系统，那时候虽然也是一知半解，大部份都是靠着问石薪林才完成，但是这的确是第一次亲手完成比较大的系统。 &lt;/p&gt;
&lt;p&gt;不过年初的寒假是最有价值的一个寒假，也让我大三下的学习容易了些。在那个寒假里我下载了毕向东的javaEE基础视频，开始对着视频学习，敲代码。那时候寒假给自己定了个目标，每天敲500行代码，学习一天的视频课程，然后坚定的买了一本书，thinking in java，这也是我入坑的第一本书。买书和买鞋一样有毒，关键是买书我总能够说服自己，这是计算机的书啊，对自己吃饭的家伙有用啊，我看了就会很屌很酷，鞋子虽然也很酷，但是不是刚需，只是心里难受点而已，毕竟当初没买的科8，现在已是天价。然而其实买的书都不怎么会看，翻了几页就扔在那边，今年在买书上也花了一两千块钱，真的翻过的其实没几本，阅读的习惯还是需要养成，以后离不开阅读的。&lt;/p&gt;
&lt;p&gt;那个寒假最后坚持到底的只有看视频，但是进度比自己想象的要慢很多，最后拖到了开学后才看完，那个寒假一直坚持天天看，天天敲，对面向对象的了解是深了，但是也只是理解了个概念，后来是真的要去写一个系统试试才知道为什么要这么写的。学会知识是一步，会用知识是第二步。最好的学习就是项目驱动。&lt;/p&gt;
&lt;p&gt;然后就进入了大三下的学习，我雄心壮志，外包省赛拿个奖，同时申请个科研和国创，一举走上巅峰。现在想想真是naive，最后啥也没干成，太高估自己了，执行力有很大问题，以及最重要的，不知道怎么从头开始去做一个系统。&lt;/p&gt;
&lt;p&gt;大三下最重要的也是最有用的一个决定，就是去了移动互联网实验室，坚持了一个学期，还好没待在寝室等死。&lt;/p&gt;
&lt;h2 id=&quot;Part-2&quot;&gt;&lt;a href=&quot;#Part-2&quot; class=&quot;headerlink&quot; title=&quot;Part 2&quot;&gt;&lt;/a&gt;Part 2&lt;/h2&gt;&lt;p&gt;接下来就是考研，突发奇想，想去考研，考个杭电的专硕，找工作会好找点，当然我还是太高估了自己的执行力，非常之差，兴冲冲的买了一堆考研的书，花了两个晚上拍脑袋决定考研，专硕没那么难，不考研是人生是不完整的。&lt;br&gt;然后就傻逼了，其实数学是真的一点都看不进去，一个月也就翻了几页。所幸的是在此之前我一直在投实习生的简历，积极参加笔试，网上的全挂了，后来投了个恒生的，去杭电笔试，通宵准备最后给我通过了，通知我去面试。&lt;br&gt;那时候面试本来不想去了，坚定的认为我是杭电未来的研究生，最后还是去玩了一下，其实自己那时候内心深处考研是有动摇的，考研准备的过程让我想起了我高三最后的那段回家自己复习的时光，那是有点自欺欺人的意思。&lt;br&gt;最后还是去面试了，因为本来就是抱着无所谓的态度，毕竟考研是主业，然后去了以后打击不小，基本上啥问题都没回答出来，和其他人一比自己简直太low太low，这也更加坚定了自己考研的计划，我现在的实力是找不到工作的。&lt;/p&gt;
&lt;p&gt;但是没想到最后居然给我通过了，待遇还相当不错，这个就再次动摇了，也再次给我放弃考研增加了筹码。我一直没拒绝这个实习生录取通知书，后来看到实习生的名单，我是最后一名，其他都是名校，就我一个三本。&lt;br&gt;最后还是在7月10号那天选择了实习生报到，开始了实习。&lt;/p&gt;
&lt;p&gt;这是一个很痛苦的挣扎，我的脑袋还在意淫骗我去考研，但是我之前的经历让我知道实习是一个更好的机会，幸运的是，这次的选择，没有选错。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;Perface&quot;&gt;&lt;a href=&quot;#Perface&quot; class=&quot;headerlink&quot; title=&quot;Perface&quot;&gt;&lt;/a&gt;Perface&lt;/h2&gt;&lt;p&gt;2016年马上就要结束了，这可能是我活到现在最跌宕起伏的一年，这一年里发生了太多太多的事情，做了太多
    
    </summary>
    
      <category term="随笔" scheme="http://yoursite.com/categories/%E9%9A%8F%E7%AC%94/"/>
    
    
      <category term="2016" scheme="http://yoursite.com/tags/2016/"/>
    
  </entry>
  
  <entry>
    <title>权限控制模型</title>
    <link href="http://yoursite.com/2016/10/13/%E6%9D%83%E9%99%90%E6%8E%A7%E5%88%B6%E6%A8%A1%E5%9E%8B/"/>
    <id>http://yoursite.com/2016/10/13/权限控制模型/</id>
    <published>2016-10-13T00:24:13.000Z</published>
    <updated>2016-10-13T08:59:44.664Z</updated>
    
    <content type="html">&lt;h2 id=&quot;最原始的权限模型（Role-Based-Access-Control）&quot;&gt;&lt;a href=&quot;#最原始的权限模型（Role-Based-Access-Control）&quot; class=&quot;headerlink&quot; title=&quot;最原始的权限模型（Role Based Access Control）&quot;&gt;&lt;/a&gt;最原始的权限模型（Role Based Access Control）&lt;/h2&gt;&lt;p&gt;用户-角色-权限，三者分别都是多对多的关系，所以抽出来两张表，关系结构为：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;用户表&lt;/li&gt;
&lt;li&gt;用户-角色对应表&lt;/li&gt;
&lt;li&gt;角色表&lt;/li&gt;
&lt;li&gt;角色-权限对应表&lt;/li&gt;
&lt;li&gt;权限表&lt;br&gt;&lt;img src=&quot;http://images.cnitblog.com/blog/453361/201406/171745032391082.png&quot; alt=&quot;image&quot;&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;哪里不好&quot;&gt;&lt;a href=&quot;#哪里不好&quot; class=&quot;headerlink&quot; title=&quot;哪里不好&quot;&gt;&lt;/a&gt;哪里不好&lt;/h3&gt;&lt;p&gt;这个模型能够适应基本的权限控制情况，但是组织结构一旦复杂，这个就不够用了。&lt;/p&gt;
&lt;p&gt;情况：一些权限控制不应该到业务层去实现，也不可能一直去添加角色，同样是项目经理，对应的是不同的项目，对于资源的划分就变的很麻烦了，每个资源都要去划分。而且按钮和菜单应该怎么去做。等用户量大的时候，一个一个的赋予角色就麻烦了，而且这个角色也会有很多个，不利于管理和维护，角色如何去分层次。&lt;/p&gt;
&lt;p&gt;如何做到字段级别的权限控制？&lt;/p&gt;
&lt;h2 id=&quot;改进版本1&quot;&gt;&lt;a href=&quot;#改进版本1&quot; class=&quot;headerlink&quot; title=&quot;改进版本1&quot;&gt;&lt;/a&gt;改进版本1&lt;/h2&gt;&lt;p&gt;加入组织表。&lt;/p&gt;
&lt;p&gt;这个版本主要是解决组织之间的角色关系，以及方便对整个用户组里的用户赋权。&lt;/p&gt;
&lt;p&gt;用户组织也是有权限的，把用户分组，因为一些权限是直接根据组来的，组织也有角色，也对应着权限，这样直接赋权限的时候就会方便点，加入这个组织就可以了。&lt;/p&gt;
&lt;p&gt;个人的权限 = 自己拥有的角色的权限 + 组织角色拥有的权限&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://images.cnitblog.com/blog/453361/201406/180839130203826.png&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;疑问&quot;&gt;&lt;a href=&quot;#疑问&quot; class=&quot;headerlink&quot; title=&quot;疑问&quot;&gt;&lt;/a&gt;疑问&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;组织也分上下级的关系，因为是树形结构，那么是不是涉及到权限的继承？&lt;/li&gt;
&lt;li&gt;不对，组织到底是个怎么样的概念，是协同上的那种树形结构，&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;应用场景&quot;&gt;&lt;a href=&quot;#应用场景&quot; class=&quot;headerlink&quot; title=&quot;应用场景&quot;&gt;&lt;/a&gt;应用场景&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;用户组织，如技术研发部、平台研发部，这些都是平行的组织，对应着自己组织的权限，可是这样和直接赋给这个人，xx成员的角色有什么区别？&lt;/li&gt;
&lt;li&gt;区别在于，用户组织，其实是一个很多角色的组合，里面包含着很多角色和权限，避免去一次一次的重复给组内的需要的角色&lt;/li&gt;
&lt;li&gt;但是假如这种情况，一个组内，也是有不同的等级的，比如项目组长、普通员工和实习生，这三者的权限又是不一样的。这个好像又回到之前那个模型的问题了&lt;/li&gt;
&lt;li&gt;组织只能适用于一些宽泛的场景，比如大家都是研发中心的员工，这个自然是和客服中心区分开来了；&lt;/li&gt;
&lt;li&gt;这个组织存在的意义是什么？就是一个大的角色而已，不对不是一个角色，这个组织可以有多个角色&lt;/li&gt;
&lt;li&gt;&lt;del&gt;角色挂在组织下，组织就是角色组，角色组也可以不参与角色分配，只是为了看起来能够更加清晰？？对，可以这样做&lt;/del&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;角色和用户组有什么区别&quot;&gt;&lt;a href=&quot;#角色和用户组有什么区别&quot; class=&quot;headerlink&quot; title=&quot;角色和用户组有什么区别&quot;&gt;&lt;/a&gt;角色和用户组有什么区别&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;角色是一组权限的集合&lt;/li&gt;
&lt;li&gt;用户组是一组角色的集合？&lt;del&gt;也不一定，也可以作为一个大的角色赋给全部人，方便统一处理&lt;/del&gt;，用户组就是一组用户的集合，这一群用户是一个组织，给组织赋权就是给组织内的全部用户赋权&lt;/li&gt;
&lt;li&gt;&lt;del&gt;角色组的出现，一是为了让组织结构看起来更加清晰，二是方便统一的对某个组织进行权限的控制&lt;/del&gt;，不对，角色组和用户组是两个概念！！&lt;/li&gt;
&lt;li&gt;用户组在一些时候，其实就是一个大的角色&lt;/li&gt;
&lt;li&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;改进版本2&quot;&gt;&lt;a href=&quot;#改进版本2&quot; class=&quot;headerlink&quot; title=&quot;改进版本2&quot;&gt;&lt;/a&gt;改进版本2&lt;/h2&gt;&lt;p&gt;改进权限表，把菜单、页面元素等东西列出来。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://images.cnitblog.com/blog/453361/201406/180839146928369.png&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;要解决的问题是，资源和权限操作并不好区分。&lt;/p&gt;
&lt;p&gt;要控制的资源，主要有：菜单，页面上的各种元素如按钮，文件，以及还有一个就是url访问的页面需要进行控制&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;不同用户拥有的菜单不同&lt;/li&gt;
&lt;li&gt;可以看到的页面元素也不同&lt;/li&gt;
&lt;li&gt;可以访问的文件也不同&lt;/li&gt;
&lt;li&gt;可以直接访问的页面也不同，一些页面需要有特定的权限才可以访问&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;前三者基本上就一个查的权限，最后一个涉及的较多，可以用url来进行区分和控制&lt;/p&gt;
&lt;p&gt;权限表给一个类型，来判断这个权限id对应的是哪个类型的资源&lt;/p&gt;
&lt;p&gt;这样是不是就解决了菜单控制的问题？&lt;/p&gt;
&lt;p&gt;这样设计会更加便于拓展，有什么新的资源或者其他的东西需要进行权限控制，只要再添加一张关联表和资源表就行&lt;/p&gt;
&lt;p&gt;页面元素怎么放里面？给编码，每个元素都有一个编码，使用一定的命名形式&lt;/p&gt;
&lt;p&gt;查出来的权限有哪些？其实就角色和权限id，全部的id都放在authorizationInfo中，info是个集合，渲染页面的时候会去遍历这个集合，如果有就渲染出来，但是页面元素这种资源不能太多，某些关键的按钮和表单，用jsp的hasPermission标签的形式就可以做到&lt;/p&gt;
&lt;p&gt;完整数据库设计：&lt;br&gt;&lt;img src=&quot;http://images.cnitblog.com/blog/453361/201406/180839166929713.png&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;角色组&quot;&gt;&lt;a href=&quot;#角色组&quot; class=&quot;headerlink&quot; title=&quot;角色组&quot;&gt;&lt;/a&gt;角色组&lt;/h3&gt;&lt;p&gt;角色组不给权限，只是作为一个分上下级的东西，或者其他的结构？这个不参与权限的分配，所以这个才是最重要的，用户组只是为了方便操作，这个才是直观的部门分层&lt;/p&gt;
&lt;p&gt;使用场景：&lt;/p&gt;
&lt;h2 id=&quot;总结&quot;&gt;&lt;a href=&quot;#总结&quot; class=&quot;headerlink&quot; title=&quot;总结&quot;&gt;&lt;/a&gt;总结&lt;/h2&gt;&lt;h3 id=&quot;添加了一个用户组的概念&quot;&gt;&lt;a href=&quot;#添加了一个用户组的概念&quot; class=&quot;headerlink&quot; title=&quot;添加了一个用户组的概念&quot;&gt;&lt;/a&gt;添加了一个用户组的概念&lt;/h3&gt;&lt;p&gt;用户组就是一组用户的集合，当给用户组赋予角色的时候，整个组内的成员都会获得这个角色以及它的权限。这样就方便了加减角色的操作，当用户量足够大的时候，就不用去挨个赋权。&lt;/p&gt;
&lt;p&gt;好像很鸡肋，又回到了一开始，用户组就是一个大角色的概念，没什么存在的意义。除了一次性的给多个用户赋角色。&lt;/p&gt;
&lt;p&gt;所以用户的权限 = 用户组的权限 + 用户自身有的角色权限&lt;/p&gt;
&lt;h3 id=&quot;把权限表细化&quot;&gt;&lt;a href=&quot;#把权限表细化&quot; class=&quot;headerlink&quot; title=&quot;把权限表细化&quot;&gt;&lt;/a&gt;把权限表细化&lt;/h3&gt;&lt;p&gt;权限分很多种，操作也是一种权限，不仅仅是那些静态的资源才有权限。所以在权限表中加入一个type字段，表明这个是什么类型的权限，是menu的还是file的，或者是control的，然后每个对应的type都单独拿出去作为一张表，这样就可以把操作和静态资源看做是一个东西来进行管理。&lt;/p&gt;
&lt;h3 id=&quot;加入角色组的概念&quot;&gt;&lt;a href=&quot;#加入角色组的概念&quot; class=&quot;headerlink&quot; title=&quot;加入角色组的概念&quot;&gt;&lt;/a&gt;加入角色组的概念&lt;/h3&gt;&lt;p&gt;角色组是不参与权限的分配的，只是拿来进行组织结构的划分，划分的结构可以是树形结构。&lt;/p&gt;
&lt;h3 id=&quot;声明&quot;&gt;&lt;a href=&quot;#声明&quot; class=&quot;headerlink&quot; title=&quot;声明&quot;&gt;&lt;/a&gt;声明&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;一个用户只能属于一个用户组&lt;/li&gt;
&lt;li&gt;用户组有继承机制，但是只能有一个父用户组&lt;/li&gt;
&lt;li&gt;一个用户组可以有多个角色和权限&lt;/li&gt;
&lt;li&gt;权限是不能直接赋给用户的，需要去创建一个角色，把权限赋给角色，然后角色赋给用户，这样的方式去进行授权操作&lt;/li&gt;
&lt;li&gt;用户的权限信息，包括permission和role这两种&lt;/li&gt;
&lt;li&gt;（应该加入一个权限互斥组）！不然一些情况没办法实现&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;使用场景模拟&quot;&gt;&lt;a href=&quot;#使用场景模拟&quot; class=&quot;headerlink&quot; title=&quot;使用场景模拟&quot;&gt;&lt;/a&gt;使用场景模拟&lt;/h2&gt;&lt;h3 id=&quot;场景一&quot;&gt;&lt;a href=&quot;#场景一&quot; class=&quot;headerlink&quot; title=&quot;场景一&quot;&gt;&lt;/a&gt;场景一&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;大家都是研发中心的员工，和客服中心的员工的基础权限是不一样的，比如研发中心的可以访问需求网站并且下载文档，客服中心的可以访问客户沟通网站&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;答：划分好权限后，把权限赋给角色，分别是需求网站访问者、文档下载者和客户沟通网站访问者。研发中心和客服中心就是两个不同的用户组，这三个角色赋给用户组后，组内的全部用户就都有了这个角色，都有了对应的权限。&lt;/p&gt;
&lt;h3 id=&quot;场景二&quot;&gt;&lt;a href=&quot;#场景二&quot; class=&quot;headerlink&quot; title=&quot;场景二&quot;&gt;&lt;/a&gt;场景二&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;研发中心的全部用户对这个页面有读的权限，里面的主管用户对这个页面有读和写的权限  &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;答：直接在权限type为功能操作那边进行拦截，写是一个角色A，读是一个角色B，对应着相应的权限，角色A赋给研发中心用户组，角色B赋给主管，这样就完成了这个场景&lt;/p&gt;
&lt;h3 id=&quot;场景三&quot;&gt;&lt;a href=&quot;#场景三&quot; class=&quot;headerlink&quot; title=&quot;场景三&quot;&gt;&lt;/a&gt;场景三&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;用户都有访问这个页面的权限，但是不同的用户看到的菜单和页面元素不同&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;答：首先菜单和页面元素全部被划分成资源，放到权限表外联的表中，在用户登录进行授权的时候，这些对应的权限id就全部被写入到用户的权限信息中，渲染页面的时候就会去遍历用户的权限信息，有哪些就显示哪些。&lt;/p&gt;
&lt;h3 id=&quot;场景四&quot;&gt;&lt;a href=&quot;#场景四&quot; class=&quot;headerlink&quot; title=&quot;场景四&quot;&gt;&lt;/a&gt;场景四&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;总经理临时需要加一个权限&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;答：那就去新建一个角色，把这个权限赋给这个角色，然后把角色添加给总经理用户，这样就完成了授权。&lt;/p&gt;
&lt;h3 id=&quot;场景五&quot;&gt;&lt;a href=&quot;#场景五&quot; class=&quot;headerlink&quot; title=&quot;场景五&quot;&gt;&lt;/a&gt;场景五&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;用户个人角色的权限和用户组权限冲突，比如实习生也算是挂在研发中心下面的，但是权限和正式员工不同，协同上一些信息是没有访问权限的，这个如何处理&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;答：这个模型不应该出现权限冲突的情况，有就是有，没有就是没有。如果用户组有，个人角色没有，那就是有；如果用户组没有，个人角色有，那还是有。如果个人不应该有组织的某个角色，那就直接不能加入这个组织，因为组织的基础角色和他不符。所以用户组的权限需要是最基础的通用的权限。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;需要加入一个约束机制，冲突的角色应该只能添加一个。&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id=&quot;场景六&quot;&gt;&lt;a href=&quot;#场景六&quot; class=&quot;headerlink&quot; title=&quot;场景六&quot;&gt;&lt;/a&gt;场景六&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;用户组如何去分级和继承权限&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;答：整个研发中心有研发中心的权限A，客服中心有权限B，研发中心下面的技术研发部的权限为a，平台研发部的权限为b，客服中心下面的维护中心的权限为c，那么技术研发部的用户的权限 = A + a + 自己本身；同理。&lt;/p&gt;
&lt;h3 id=&quot;场景七&quot;&gt;&lt;a href=&quot;#场景七&quot; class=&quot;headerlink&quot; title=&quot;场景七&quot;&gt;&lt;/a&gt;场景七&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;每个人只能查看自己的工资信息，这个应该如何实现？&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;答：应该在业务层实现，查工资这个权限应该在小组中就定义好【查工资者】这一个角色，然后在执行查工资的操作的时候，传入id，返回个人的工资信息并显示。&lt;/p&gt;
&lt;h3 id=&quot;场景八&quot;&gt;&lt;a href=&quot;#场景八&quot; class=&quot;headerlink&quot; title=&quot;场景八&quot;&gt;&lt;/a&gt;场景八&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;要取消组内的某个人的权限，这个权限来自于用户组，如何操作&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;答：直接把这个人移出组？感觉不对，难道要为了他去特地创建一个角色，可是只能这么做，把这个角色从他身上取掉，退出这个用户组，然后给他一个阉割过的角色。&lt;/p&gt;
&lt;h3 id=&quot;场景九&quot;&gt;&lt;a href=&quot;#场景九&quot; class=&quot;headerlink&quot; title=&quot;场景九&quot;&gt;&lt;/a&gt;场景九&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;父用户组有的功能，但是下面的子用户组需要禁止这个权限，如何操作？&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;答：参考场景五。分组的时候就需要考虑到这个问题，那样的话这个模型是不是就有问题了。&lt;/p&gt;
&lt;p&gt;网上的回答是：1、加入互斥角色；2、有一个基数约束（领导的数量是有限的）；3、有先决条件角色（你想当技术专家，你首先必须是高级工程师，需要获得低一级的角色权限）；4、运行时互斥。&lt;/p&gt;
&lt;p&gt;好像已经背离了基于资源的权限控制，现在就是基于角色的，所以问题很大。但是角色其实就是资源权限的一个封装啊，就是一个权限的集合，只是为了更加符合人类思考的常理，不可能去后面拖着一堆权限，最后组装成permission的时候，其实也是根据角色去查询具体的权限的啊，这个是系统框架层次需要去思考的问题，现在只是一个数据库设计而已，依旧可以通过user-role-permission三表来查询到user的permission。&lt;/p&gt;
&lt;p&gt;现在的问题在于如何去取消权限&lt;/p&gt;
&lt;h2 id=&quot;问石磊&quot;&gt;&lt;a href=&quot;#问石磊&quot; class=&quot;headerlink&quot; title=&quot;问石磊&quot;&gt;&lt;/a&gt;问石磊&lt;/h2&gt;&lt;p&gt;模型更改，加入部门的概念，不能用用户组来模拟部门，部门不应该有权限，只是一个逻辑上的分区&lt;/p&gt;
&lt;h3 id=&quot;新模型要点&quot;&gt;&lt;a href=&quot;#新模型要点&quot; class=&quot;headerlink&quot; title=&quot;新模型要点&quot;&gt;&lt;/a&gt;新模型要点&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;del&gt;用户组可以继承，继承的是父类的角色&lt;/del&gt;&lt;/li&gt;
&lt;li&gt;用户组和角色之间的关系是：用户组只能有一个角色，角色可以赋给多个用户组&lt;/li&gt;
&lt;li&gt;用户可以单独赋予权限&lt;/li&gt;
&lt;li&gt;一个用户可以加入多个用户组&lt;/li&gt;
&lt;li&gt;取消权限是一个灾难，一旦涉及到取消，就要把用户移出当前用户组，其实可以解决啊！！要做的操作比较少的&lt;/li&gt;
&lt;li&gt;是否存在权限冲突的情况（不是很想的到场景）&lt;/li&gt;
&lt;li&gt;关键在于用户组的分类，之前想的是把用户组作为有相同角色的全部用户的集合，想一起方便的赋权，但是这样就违背了组织本来的概念。现在把用户组通过部门来进行管理，部门不涉及权限。&lt;/li&gt;
&lt;li&gt;但是如果用户组下面还有用户组的话，是不是就会有问题。用户组的表应该怎么设计，部门的表又应该怎么设计？是不是应该去取消用户组的继承，部门的东西全部在部门的逻辑分组中完成，&lt;del&gt;一个用户组只能属于一个部门&lt;/del&gt;，用户组下面只有用户。但是这样设计的话，就没有一级一级继承下来的意思了，或者说本来就不应该有这个想法，继承不应该是在这边继承，换个角度去思考，因为一个用户可以加入多个用户组，所以用户可以继承到多个角色，虽然没有一级级的角色继承，你是研发中心的员工，所以有研发中心的员工的基础权限，你是研发中心的技术研发部的员工，所以有技术研发部的权限 + 研发中心的基础权限，这样就是一种继承。如果换成现在这种模型，就是部门下面会有部门和用户组，你又是研发中心的普通员工，也是技术研发部的普通员工，所以你有这两个用户组的角色，&lt;strong&gt;所以用户会和用户组有一个多对多的对应表&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;首先，&lt;strong&gt;没有人是可以游离于组织之外的&lt;/strong&gt;，每个人都至少属于一个组织，实习生属于实习生的组织 + 实习生所在的部门的组织，用户组的概念要更正，用户组首先是一个用户的集合，其次他本身拥有一个角色，有等级的角色，如，基础角色A，中级角色B，高级角色C，终极角色D，首先全部人都有基础角色A，正式员工会加一个B角色，高级员工再加个C，以此类推。&lt;/li&gt;
&lt;li&gt;要明确，这个是数据库设计，不是框架层次的设计，一些业务上的东西应该交给框架或者是业务代码去实现。&lt;/li&gt;
&lt;li&gt;为什么不能给用户组赋予多个角色？没必要&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;常用场景模拟&quot;&gt;&lt;a href=&quot;#常用场景模拟&quot; class=&quot;headerlink&quot; title=&quot;常用场景模拟&quot;&gt;&lt;/a&gt;常用场景模拟&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;实习生转正了&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;答：给他加入到中级用户组即可。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;换了一个组织，从技术研发部到了公共支持部 &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;答：直接把用户的用户组更改一下，放到另外一个部门下的用户组里就行&lt;/p&gt;
&lt;p&gt;- &lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;最原始的权限模型（Role-Based-Access-Control）&quot;&gt;&lt;a href=&quot;#最原始的权限模型（Role-Based-Access-Control）&quot; class=&quot;headerlink&quot; title=&quot;最原始的权限模型（Role Based Ac
    
    </summary>
    
      <category term="框架" scheme="http://yoursite.com/categories/%E6%A1%86%E6%9E%B6/"/>
    
    
      <category term="shiro" scheme="http://yoursite.com/tags/shiro/"/>
    
  </entry>
  
  <entry>
    <title>springmvc注解整理</title>
    <link href="http://yoursite.com/2016/10/08/springmvc%E6%B3%A8%E8%A7%A3%E6%95%B4%E7%90%86/"/>
    <id>http://yoursite.com/2016/10/08/springmvc注解整理/</id>
    <published>2016-10-08T02:23:55.000Z</published>
    <updated>2016-10-08T02:25:17.590Z</updated>
    
    <content type="html">&lt;h2 id=&quot;注解&quot;&gt;&lt;a href=&quot;#注解&quot; class=&quot;headerlink&quot; title=&quot;注解&quot;&gt;&lt;/a&gt;注解&lt;/h2&gt;&lt;p&gt;什么是注解？&lt;/p&gt;
&lt;h3 id=&quot;起步&quot;&gt;&lt;a href=&quot;#起步&quot; class=&quot;headerlink&quot; title=&quot;起步&quot;&gt;&lt;/a&gt;起步&lt;/h3&gt;&lt;figure class=&quot;highlight xml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;&amp;lt;!-- 注解驱动的方式，不用再去写映射器和适配器，也自动导入了json的转换器 --&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;mvc:annotation-driven&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;validator&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;validator&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;注解整理&quot;&gt;&lt;a href=&quot;#注解整理&quot; class=&quot;headerlink&quot; title=&quot;注解整理&quot;&gt;&lt;/a&gt;注解整理&lt;/h2&gt;&lt;h3 id=&quot;Controller&quot;&gt;&lt;a href=&quot;#Controller&quot; class=&quot;headerlink&quot; title=&quot;Controller&quot;&gt;&lt;/a&gt;Controller&lt;/h3&gt;&lt;p&gt;声明这是一个controller，配置了组件扫描之后会自动去找有这个注解的类。&lt;/p&gt;
&lt;p&gt;在springmvc的配置文件中加入组件扫描。&lt;br&gt;&lt;figure class=&quot;highlight xml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;&amp;lt;!-- 组件扫描 --&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;context:component-scan&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;base-package&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;com.hundsun.ssm.controller&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3 id=&quot;RequestMapping&quot;&gt;&lt;a href=&quot;#RequestMapping&quot; class=&quot;headerlink&quot; title=&quot;RequestMapping&quot;&gt;&lt;/a&gt;RequestMapping&lt;/h3&gt;&lt;p&gt;一个url路径。同时里面也可以有参数，可以去限制请求方法。&lt;/p&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 只能通过post方法来请求&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;@RequestMapping&lt;/span&gt;(value=&lt;span class=&quot;string&quot;&gt;&quot;items&quot;&lt;/span&gt;,method=&amp;#123;RequestMethod.POST&amp;#125;)&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;Autowired&quot;&gt;&lt;a href=&quot;#Autowired&quot; class=&quot;headerlink&quot; title=&quot;Autowired&quot;&gt;&lt;/a&gt;Autowired&lt;/h3&gt;&lt;p&gt;自动装配，有了这个就不用去给每次的注入添加set方法。&lt;/p&gt;
&lt;h3 id=&quot;RequestBody&quot;&gt;&lt;a href=&quot;#RequestBody&quot; class=&quot;headerlink&quot; title=&quot;RequestBody&quot;&gt;&lt;/a&gt;RequestBody&lt;/h3&gt;&lt;p&gt;请求的格式为json格式。&lt;/p&gt;
&lt;h4 id=&quot;ajax请求&quot;&gt;&lt;a href=&quot;#ajax请求&quot; class=&quot;headerlink&quot; title=&quot;ajax请求&quot;&gt;&lt;/a&gt;ajax请求&lt;/h4&gt;&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//请求json，输出是json&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;requestJson&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;)&lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;	&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  $.ajax(&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    type:&lt;span class=&quot;string&quot;&gt;&#39;post&#39;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    url:&lt;span class=&quot;string&quot;&gt;&#39;$&amp;#123;pageContext.request.contextPath&amp;#125;/requestJson.action&#39;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    contentType:&lt;span class=&quot;string&quot;&gt;&#39;application/json;charset=utf-8&#39;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//数据格式是json串，商品信息&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    data:&lt;span class=&quot;string&quot;&gt;&#39;&amp;#123;&quot;name&quot;:&quot;手机&quot;,&quot;price&quot;:999&amp;#125;&#39;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    success:&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;data&lt;/span&gt;)&lt;/span&gt;&amp;#123;&lt;span class=&quot;comment&quot;&gt;//返回json结果&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        alert(data);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;	&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;controller接收处理请求&quot;&gt;&lt;a href=&quot;#controller接收处理请求&quot; class=&quot;headerlink&quot; title=&quot;controller接收处理请求&quot;&gt;&lt;/a&gt;controller接收处理请求&lt;/h4&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;@RequestMapping&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;/requestJson&quot;&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;meta&quot;&gt;@ResponseBody&lt;/span&gt; &lt;span class=&quot;function&quot;&gt;ItemsCustom &lt;span class=&quot;title&quot;&gt;requestJson&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(@RequestBody ItemsCustom itemsCustom)&lt;/span&gt;&lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// do something...&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; itemsCustom;	&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;ResponseBody&quot;&gt;&lt;a href=&quot;#ResponseBody&quot; class=&quot;headerlink&quot; title=&quot;ResponseBody&quot;&gt;&lt;/a&gt;ResponseBody&lt;/h3&gt;&lt;p&gt;响应的格式为json格式。&lt;/p&gt;
&lt;h4 id=&quot;ajax请求-1&quot;&gt;&lt;a href=&quot;#ajax请求-1&quot; class=&quot;headerlink&quot; title=&quot;ajax请求&quot;&gt;&lt;/a&gt;ajax请求&lt;/h4&gt;&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//请求key/value，输出是json&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;responseJson&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;)&lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;	&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  $.ajax(&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    type:&lt;span class=&quot;string&quot;&gt;&#39;post&#39;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    url:&lt;span class=&quot;string&quot;&gt;&#39;$&amp;#123;pageContext.request.contextPath&amp;#125;/responseJson.action&#39;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//请求是key/value这里不需要指定contentType，因为默认就 是key/value类型&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//contentType:&#39;application/json;charset=utf-8&#39;,&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//数据格式是json串，商品信息&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    data:&lt;span class=&quot;string&quot;&gt;&#39;name=手机&amp;amp;price=999&#39;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    success:&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;data&lt;/span&gt;)&lt;/span&gt;&amp;#123;&lt;span class=&quot;comment&quot;&gt;//返回json结果&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        alert(data.name);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;	&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;controller接收处理&quot;&gt;&lt;a href=&quot;#controller接收处理&quot; class=&quot;headerlink&quot; title=&quot;controller接收处理&quot;&gt;&lt;/a&gt;controller接收处理&lt;/h4&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 返回的是json，输入的是key/value格式&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;@RequestMapping&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;/responseJson&quot;&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;meta&quot;&gt;@ResponseBody&lt;/span&gt; &lt;span class=&quot;function&quot;&gt;ItemsCustom &lt;span class=&quot;title&quot;&gt;responseJson&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(ItemsCustom itemsCustom)&lt;/span&gt;&lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// do something...&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; itemsCustom;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;ModelAttribute&quot;&gt;&lt;a href=&quot;#ModelAttribute&quot; class=&quot;headerlink&quot; title=&quot;ModelAttribute&quot;&gt;&lt;/a&gt;ModelAttribute&lt;/h3&gt;&lt;h3 id=&quot;Validated&quot;&gt;&lt;a href=&quot;#Validated&quot; class=&quot;headerlink&quot; title=&quot;Validated&quot;&gt;&lt;/a&gt;Validated&lt;/h3&gt;&lt;p&gt;分组的时候用。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;注解&quot;&gt;&lt;a href=&quot;#注解&quot; class=&quot;headerlink&quot; title=&quot;注解&quot;&gt;&lt;/a&gt;注解&lt;/h2&gt;&lt;p&gt;什么是注解？&lt;/p&gt;
&lt;h3 id=&quot;起步&quot;&gt;&lt;a href=&quot;#起步&quot; class=&quot;headerlink&quot; title=&quot;起步&quot;&gt;&lt;/a
    
    </summary>
    
      <category term="框架" scheme="http://yoursite.com/categories/%E6%A1%86%E6%9E%B6/"/>
    
    
      <category term="springmvc" scheme="http://yoursite.com/tags/springmvc/"/>
    
  </entry>
  
  <entry>
    <title>fastjson试用</title>
    <link href="http://yoursite.com/2016/09/21/fastjson%E8%AF%95%E7%94%A8/"/>
    <id>http://yoursite.com/2016/09/21/fastjson试用/</id>
    <published>2016-09-21T07:56:10.000Z</published>
    <updated>2016-09-21T08:00:45.489Z</updated>
    
    <content type="html">&lt;h2 id=&quot;什么是fastjson&quot;&gt;&lt;a href=&quot;#什么是fastjson&quot; class=&quot;headerlink&quot; title=&quot;什么是fastjson&quot;&gt;&lt;/a&gt;什么是fastjson&lt;/h2&gt;&lt;p&gt;Fastjson是一个Java语言编写的高性能功能完善的JSON库。它采用一种“假定有序快速匹配”的算法，把JSON Parse的性能提升到极致，是目前Java语言中最快的JSON库。Fastjson接口简单易用，已经被广泛使用在缓存序列化、协议交互、Web输出、Android客户端等多种应用场景。&lt;/p&gt;
&lt;h2 id=&quot;简单的小例子&quot;&gt;&lt;a href=&quot;#简单的小例子&quot; class=&quot;headerlink&quot; title=&quot;简单的小例子&quot;&gt;&lt;/a&gt;简单的小例子&lt;/h2&gt;&lt;h3 id=&quot;pom依赖&quot;&gt;&lt;a href=&quot;#pom依赖&quot; class=&quot;headerlink&quot; title=&quot;pom依赖&quot;&gt;&lt;/a&gt;pom依赖&lt;/h3&gt;&lt;figure class=&quot;highlight xml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;&amp;lt;!-- fastjson --&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;dependency&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;groupId&lt;/span&gt;&amp;gt;&lt;/span&gt;com.alibaba&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;groupId&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;artifactId&lt;/span&gt;&amp;gt;&lt;/span&gt;fastjson&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;artifactId&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;version&lt;/span&gt;&amp;gt;&lt;/span&gt;1.2.17&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;version&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;dependency&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;User-java&quot;&gt;&lt;a href=&quot;#User-java&quot; class=&quot;headerlink&quot; title=&quot;User.java&quot;&gt;&lt;/a&gt;User.java&lt;/h3&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;19&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;20&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;21&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;22&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;23&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;24&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;25&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;26&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;27&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;28&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;29&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;package&lt;/span&gt; com.hundsun.shiro.JsonTest;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;/**&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; * user实体类&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; * &lt;/div&gt;&lt;div class=&quot;line&quot;&gt; * &lt;span class=&quot;doctag&quot;&gt;@author&lt;/span&gt; zeewane&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; * &lt;span class=&quot;doctag&quot;&gt;@date&lt;/span&gt; 2016年9月21日 下午3:40:41&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; */&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;User&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt; Long id;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt; String name;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;	&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; Long &lt;span class=&quot;title&quot;&gt;getId&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;		&lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; id;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;	&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;	&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;setId&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(Long id)&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;		&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.id = id;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;	&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;	&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; String &lt;span class=&quot;title&quot;&gt;getName&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;		&lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; name;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;	&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;	&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;setName&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(String name)&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;		&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.name = name;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;	&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;Group-java&quot;&gt;&lt;a href=&quot;#Group-java&quot; class=&quot;headerlink&quot; title=&quot;Group.java&quot;&gt;&lt;/a&gt;Group.java&lt;/h3&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;19&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;20&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;21&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;22&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;23&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;24&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;25&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;26&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;27&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;28&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;29&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;30&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;31&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;32&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;33&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;34&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;35&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;36&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;37&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;38&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;39&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;40&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;41&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;42&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;43&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;package&lt;/span&gt; com.hundsun.shiro.JsonTest;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; java.util.List;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; java.util.ArrayList;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;/**&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; * group的实体类&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; * &lt;/div&gt;&lt;div class=&quot;line&quot;&gt; * &lt;span class=&quot;doctag&quot;&gt;@author&lt;/span&gt; zeewane&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; * &lt;span class=&quot;doctag&quot;&gt;@date&lt;/span&gt; 2016年9月21日 下午3:42:05&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; */&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Group&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt; Long id;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt; String name;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt; List&amp;lt;User&amp;gt; users = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; ArrayList&amp;lt;User&amp;gt;();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;	&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; Long &lt;span class=&quot;title&quot;&gt;getId&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;		&lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; id;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;	&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;	&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;setId&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(Long id)&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;		&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.id = id;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;	&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;	&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; String &lt;span class=&quot;title&quot;&gt;getName&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;		&lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; name;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;	&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;	&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;setName&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(String name)&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;		&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.name = name;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;	&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;	&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; List&amp;lt;User&amp;gt; &lt;span class=&quot;title&quot;&gt;getUsers&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;		&lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; users;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;	&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;	&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;setUsers&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(List&amp;lt;User&amp;gt; users)&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;		&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.users = users;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;	&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;Test1-java&quot;&gt;&lt;a href=&quot;#Test1-java&quot; class=&quot;headerlink&quot; title=&quot;Test1.java&quot;&gt;&lt;/a&gt;Test1.java&lt;/h3&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;19&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;20&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;21&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;22&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;23&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;24&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;25&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;26&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;27&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;28&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;29&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;30&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;31&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;32&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;33&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;34&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;35&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;36&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;37&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;38&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;39&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;40&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;41&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;42&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;43&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;44&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;45&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;46&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;47&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;48&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;49&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;50&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;51&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;package&lt;/span&gt; com.hundsun.shiro.JsonTest;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; com.alibaba.fastjson.JSON;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;/**&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; * fastjson的测试类，java对象和json格式之间的互转&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; * &lt;/div&gt;&lt;div class=&quot;line&quot;&gt; * &lt;span class=&quot;doctag&quot;&gt;@author&lt;/span&gt; zeewane&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; * &lt;span class=&quot;doctag&quot;&gt;@date&lt;/span&gt; 2016年9月21日 下午3:47:20&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; */&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Test1&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;	&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(String[] args)&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;		Group group = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; Group();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;		group.setId(&lt;span class=&quot;number&quot;&gt;0L&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;		group.setName(&lt;span class=&quot;string&quot;&gt;&quot;admin&quot;&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;		User guestUser = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; User();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;		guestUser.setId(&lt;span class=&quot;number&quot;&gt;2L&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;		guestUser.setName(&lt;span class=&quot;string&quot;&gt;&quot;guest&quot;&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;		User rootUser = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; User();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;		rootUser.setId(&lt;span class=&quot;number&quot;&gt;3L&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;		rootUser.setName(&lt;span class=&quot;string&quot;&gt;&quot;root&quot;&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;		group.getUsers().add(guestUser);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;		group.getUsers().add(rootUser);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;		&lt;span class=&quot;comment&quot;&gt;// 将java对象转换成json&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;		String jsonString = JSON.toJSONString(group);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;		System.out.println(jsonString);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;		&lt;span class=&quot;comment&quot;&gt;// 将json重新转换为java对象&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;		Group group2 = JSON.parseObject(jsonString, Group.class);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;		System.out.println(group2.getName());&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;		&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (User user : group2.getUsers()) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;			System.out.println(user.getId() + &lt;span class=&quot;string&quot;&gt;&quot;:&quot;&lt;/span&gt; + user.getName());&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;		&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;	&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// output&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#123;&lt;span class=&quot;string&quot;&gt;&quot;id&quot;&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&quot;name&quot;&lt;/span&gt;:&lt;span class=&quot;string&quot;&gt;&quot;admin&quot;&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&quot;users&quot;&lt;/span&gt;:[&amp;#123;&lt;span class=&quot;string&quot;&gt;&quot;id&quot;&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&quot;name&quot;&lt;/span&gt;:&lt;span class=&quot;string&quot;&gt;&quot;guest&quot;&lt;/span&gt;&amp;#125;,&amp;#123;&lt;span class=&quot;string&quot;&gt;&quot;id&quot;&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&quot;name&quot;&lt;/span&gt;:&lt;span class=&quot;string&quot;&gt;&quot;root&quot;&lt;/span&gt;&amp;#125;]&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;admin&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;:guest&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;:root&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;什么是fastjson&quot;&gt;&lt;a href=&quot;#什么是fastjson&quot; class=&quot;headerlink&quot; title=&quot;什么是fastjson&quot;&gt;&lt;/a&gt;什么是fastjson&lt;/h2&gt;&lt;p&gt;Fastjson是一个Java语言编写的高性能功能完善的JSON库。
    
    </summary>
    
      <category term="基础" scheme="http://yoursite.com/categories/%E5%9F%BA%E7%A1%80/"/>
    
    
      <category term="fastjson" scheme="http://yoursite.com/tags/fastjson/"/>
    
  </entry>
  
  <entry>
    <title>win10无法新建的解决办法</title>
    <link href="http://yoursite.com/2016/09/14/win10%E6%97%A0%E6%B3%95%E6%96%B0%E5%BB%BA%E7%9A%84%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95/"/>
    <id>http://yoursite.com/2016/09/14/win10无法新建的解决办法/</id>
    <published>2016-09-14T06:29:15.000Z</published>
    <updated>2016-09-18T00:52:23.481Z</updated>
    
    <content type="html">&lt;p&gt;因为显示有病毒，就一时冲动去下载了据说口碑比较好的360 total security，也就是传说中的360国际版。&lt;br&gt;然后装上以后就给我来了一通扫描，然后说优化，然后就删了我一堆注册表……直接导致少了git、svn、新建和intel显卡驱动的右键操作。&lt;br&gt;新建的找了好久都找不到办法，后来试了一个，成了。另外的三个预计是要重新安装程序了，刚好把git的版本降低一点。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;首先用管理员身份打开cmd。&lt;/li&gt;
&lt;li&gt;输入命令&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;cmd /k reg add &amp;quot;HKEY_CLASSES_ROOT\Directory\Background\shellex\ContextMenuHandlers\New&amp;quot; /ve /t REG_SZ /d &amp;#123;D969A300-E7FF-11d0-A93B-00A0C90F2719&amp;#125; /f&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;直接运行即可。&lt;br&gt;新建功能修复，待会来测试git和svn是否正常。&lt;/p&gt;
&lt;p&gt;update at 2016.09.18  &lt;/p&gt;
&lt;p&gt;重新安装git和svn后，右键功能正常，集成显卡的驱动要到时候更新以后才会出现了，不过这个无妨，平时不大用。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;因为显示有病毒，就一时冲动去下载了据说口碑比较好的360 total security，也就是传说中的360国际版。&lt;br&gt;然后装上以后就给我来了一通扫描，然后说优化，然后就删了我一堆注册表……直接导致少了git、svn、新建和intel显卡驱动的右键操作。&lt;br&gt;新建的找
    
    </summary>
    
    
      <category term="bug" scheme="http://yoursite.com/tags/bug/"/>
    
  </entry>
  
  <entry>
    <title>sublime text3 注册码</title>
    <link href="http://yoursite.com/2016/09/09/sublime-text3-%E6%B3%A8%E5%86%8C%E7%A0%81/"/>
    <id>http://yoursite.com/2016/09/09/sublime-text3-注册码/</id>
    <published>2016-09-09T02:47:36.000Z</published>
    <updated>2016-09-09T02:48:43.128Z</updated>
    
    <content type="html">&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;—– BEGIN LICENSE —–&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Michael Barnes&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Single User License&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;EA7E-821385&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8A353C41 872A0D5C DF9B2950 AFF6F667&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;C458EA6D 8EA3C286 98D1D650 131A97AB&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;AA919AEC EF20E143 B361B1E7 4C8B7F04&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;B085E65E 2F5F5360 8489D422 FB8FC1AA&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;93F6323C FD7F7544 3F39C318 D95E6480&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;FCCC7561 8A4A1741 68FA4223 ADCEDE07&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;200C25BE DBBC4855 C4CFB774 C5EC138C&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;0FEC1CEF D9DCECEC D3A5DAD1 01316C36&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;—— END LICENSE ——&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;过了这么久依旧可以用……&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/di
    
    </summary>
    
      <category term="tools" scheme="http://yoursite.com/categories/tools/"/>
    
    
      <category term="sublime" scheme="http://yoursite.com/tags/sublime/"/>
    
  </entry>
  
  <entry>
    <title>一个超级酷的网页背景</title>
    <link href="http://yoursite.com/2016/09/02/%E4%B8%80%E4%B8%AA%E8%B6%85%E7%BA%A7%E9%85%B7%E7%9A%84%E7%BD%91%E9%A1%B5%E8%83%8C%E6%99%AF/"/>
    <id>http://yoursite.com/2016/09/02/一个超级酷的网页背景/</id>
    <published>2016-09-02T07:01:51.000Z</published>
    <updated>2016-09-07T02:50:02.038Z</updated>
    
    <content type="html">&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&amp;lt;script src=&lt;span class=&quot;string&quot;&gt;&quot;http://open.sojson.com/common/js/canvas-nest.min.js&quot;&lt;/span&gt; &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        count=&lt;span class=&quot;string&quot;&gt;&quot;200&quot;&lt;/span&gt; zindex=&lt;span class=&quot;string&quot;&gt;&quot;-2&quot;&lt;/span&gt; opacity=&lt;span class=&quot;string&quot;&gt;&quot;0.5&quot;&lt;/span&gt; color=&lt;span class=&quot;string&quot;&gt;&quot;47,135,193&quot;&lt;/span&gt; type=&lt;span class=&quot;string&quot;&gt;&quot;text/javascript&quot;&lt;/span&gt;&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;xml&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;超级酷的一个效果，在sojson网站上看到的，站长分享了。&lt;br&gt;会根据鼠标的位置，然后折线不断的汇聚，最后变成很酷的一个圆。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;注意事项&lt;/strong&gt;&lt;br&gt;要把这个放在body里面，放在header里会出事。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;
    
    </summary>
    
      <category term="前端" scheme="http://yoursite.com/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="html" scheme="http://yoursite.com/tags/html/"/>
    
  </entry>
  
  <entry>
    <title>shiro源码分析博客</title>
    <link href="http://yoursite.com/2016/08/31/shiro%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E5%8D%9A%E5%AE%A2/"/>
    <id>http://yoursite.com/2016/08/31/shiro源码分析博客/</id>
    <published>2016-08-31T00:37:48.000Z</published>
    <updated>2016-08-31T00:38:28.376Z</updated>
    
    <content type="html">&lt;p&gt;发现一个超级棒的shiro源码分析博客，大神就是屌。  &lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://lgbolgger.iteye.com/blog/2163890&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;shiro源码分析（一）入门&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://lgbolgger.iteye.com/blog/2165026&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;shiro源码分析（二）Subject和Session&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://lgbolgger.iteye.com/blog/2166909&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;shiro源码分析（三）授权、认证、缓存的接口设计&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://lgbolgger.iteye.com/blog/2168797&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;shiro源码分析（四）具体的Realm&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://lgbolgger.iteye.com/blog/2168520&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;shiro源码分析（五）CredentialsMatcher&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://lgbolgger.iteye.com/blog/2170522&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;shiro源码分析（六）CredentialsMatcher的案例分析&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;发现一个超级棒的shiro源码分析博客，大神就是屌。  &lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://lgbolgger.iteye.com/blog/2163890&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;shiro源码分析（一）入门&lt;/a&gt;&lt;b
    
    </summary>
    
      <category term="框架" scheme="http://yoursite.com/categories/%E6%A1%86%E6%9E%B6/"/>
    
    
      <category term="shiro" scheme="http://yoursite.com/tags/shiro/"/>
    
  </entry>
  
  <entry>
    <title>关于登陆加密的一些疑惑</title>
    <link href="http://yoursite.com/2016/08/30/%E5%85%B3%E4%BA%8E%E7%99%BB%E9%99%86%E5%8A%A0%E5%AF%86%E7%9A%84%E4%B8%80%E4%BA%9B%E7%96%91%E6%83%91/"/>
    <id>http://yoursite.com/2016/08/30/关于登陆加密的一些疑惑/</id>
    <published>2016-08-30T08:59:40.000Z</published>
    <updated>2016-09-28T00:50:20.703Z</updated>
    
    <content type="html">&lt;p&gt;shiro里面预置了一些散列的加密算法，这些加密算法都是要逼近单向散列函数，简单的理解就是你可以通过输入的密码，然后放入哈希算法中去计算得到一串32位的字符串，然后持久化保存到数据库中，但是你没有办法把这个32位的字符串还原为密码，这个加密的过程是不可逆的。所以shiro这边在进行认证的时候，会在认证器Authenticator里写好加密的算法，用户认证的时候传入的token中有用户的密码，提取出来然后经过运算得到这串32位的字符串，去和数据库中的进行比较，如果一致就认证通过。这个操作避免了明文储存密码的隐患，数据库被入侵也不会导致用户的密码泄露。  &lt;/p&gt;
&lt;p&gt;因为一些简单密码的存在，所以通过md5的密文来反向推导出那些简单的密码也是可行的，这类网站也大量的存在。所以就有了盐这个概念，用户的密码加上盐然后再进行散列计算，这串密文被反向破解的几率就大大减小，每个用户都有自己的随机生成的盐，被保存在数据库中。这个操作是避免了数据库中简单密码被破解的隐患。  &lt;/p&gt;
&lt;p&gt;但是如果请求在中途被拦截，这时候用户的密码万一是明文传输，就被直接被拦住然后解析出来了，下次就直接拿着这个用户名和密码去登陆就行。所以要在客户端就进行加密，盐可以在前端就随机生成然后保存在session中，和密文一并传给server。服务器从session中获取盐，进行运算和比较，相同就通过认证。这个操作避免了请求被拦截后密码直接被取出的问题。（这个是我自己瞎想的，感觉逻辑有问题，这个session中的盐有什么用，数据库中要存的是密文，传过来的盐不是一点价值都没有，又不可能数据库里取出来然后解密再加密。所以应该是客户端传过来的的确应该是密文，但是收到以后要进行解密，变成用户输入的密码原文后再进行从数据库中读取盐，进行加密运算，然后再和数据库中保存的密文比较，相同就通过），所以客户端的盐是功能是，防止简单密码被拦截然后破解。  &lt;/p&gt;
&lt;p&gt;但是，如果是在用户点击登录按钮的瞬间，获取了password输入框里面的value值呢？他们不需要知道加密算法和盐是什么东西，他们只需要拿到用户的账号和密码就可以在下次直接登陆，那这个东西不是没办法去防范了，除非借助手机验证码这种可以证明身份的形式，或者是大数据进行分析，得出常用登陆电脑和登陆地点进行判断，不是常用的设备和地点就发验证码，是就可以登陆，不然没办法阻止他们获取用户名和密码啊。&lt;/p&gt;
&lt;p&gt;是不是要换种思路，我理解的只有散列算法，太狭隘了？还是说道高一尺魔高一丈，是不可能完全阻止密码被获取的，动态的验证码也只能避免他们去成功登陆，并不能阻止他们获取正确的密码。&lt;/p&gt;
&lt;h2 id=&quot;证书&quot;&gt;&lt;a href=&quot;#证书&quot; class=&quot;headerlink&quot; title=&quot;证书&quot;&gt;&lt;/a&gt;证书&lt;/h2&gt;&lt;p&gt;update at 2016/09/27 14:10&lt;/p&gt;
&lt;p&gt;需要一个签名（证书），而且一定要有时效性，时间戳是不可见的，随机数让他看到就看到，证书包括的是时间戳、密文、状态位。  &lt;/p&gt;
&lt;p&gt;首先传过来的肯定是要一个密文的形式，不能明文传输，需要加密后进行传输。  &lt;/p&gt;
&lt;p&gt;在用户请求登陆页面的时候，服务器同步生成一个签名，保存在服务器，并随着登陆页面返回过去，放在隐藏输入框中，签名的作用是判断用户请求的表单是不是服务器响应返回的那个，辨别被挟持伪造的请求，具有时效性。里面存着：时间戳（用户请求登陆的时间），状态位（判断是否被劫持伪造过），随机生成的密文，作为判断。&lt;/p&gt;
&lt;p&gt;用户接收到登陆页面开始登陆，输入用户名、密码，点击登陆按钮开始登陆，此时对明文密码进行加密然后进行传输。此时签名也作为隐藏的输入域被提交，    状态位此时被修改，（状态位不应该这么使用，这样被拦截了也没什么用啊），同时提交的还有当前的时间戳。&lt;/p&gt;
&lt;p&gt;服务端接收到用户登录的信息后，首先要去进行签名的对照，两个时间之间的间隔是否超时，若超时则判断此登陆无效；此外判断签名中的密文是否一致，状态位是否正确，如果通过，就进入密码核对环节。&lt;/p&gt;
&lt;p&gt;数据库进行散列存储是为了避免内部运维看到明文密码，或者数据库泄露被拖库后导致用户信息流出。这一步在注册的时候即完成，随机生成一个盐，保存在用户的身份信息表中，不可逆的散列算法计算多次后保存密码。&lt;/p&gt;
&lt;p&gt;再加上判断是不是常用地点、常用设备登陆，不是就加上一个手机短信验证码的程序，来判断是不是本人在使用。&lt;/p&gt;
&lt;p&gt;不可能做到绝对的安全。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;shiro里面预置了一些散列的加密算法，这些加密算法都是要逼近单向散列函数，简单的理解就是你可以通过输入的密码，然后放入哈希算法中去计算得到一串32位的字符串，然后持久化保存到数据库中，但是你没有办法把这个32位的字符串还原为密码，这个加密的过程是不可逆的。所以shiro这
    
    </summary>
    
      <category term="框架" scheme="http://yoursite.com/categories/%E6%A1%86%E6%9E%B6/"/>
    
    
      <category term="安全" scheme="http://yoursite.com/tags/%E5%AE%89%E5%85%A8/"/>
    
  </entry>
  
  <entry>
    <title>shiro授权代码流程</title>
    <link href="http://yoursite.com/2016/08/26/shiro%E6%8E%88%E6%9D%83%E4%BB%A3%E7%A0%81%E6%B5%81%E7%A8%8B/"/>
    <id>http://yoursite.com/2016/08/26/shiro授权代码流程/</id>
    <published>2016-08-25T22:27:29.000Z</published>
    <updated>2016-08-26T06:42:25.703Z</updated>
    
    <content type="html">&lt;h2 id=&quot;授权流程&quot;&gt;&lt;a href=&quot;#授权流程&quot; class=&quot;headerlink&quot; title=&quot;授权流程&quot;&gt;&lt;/a&gt;授权流程&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;shiro拦截到需要权限的url的时候，就传入需要的permission，进行subject.isPermitted(permission)的检查。&lt;/li&gt;
&lt;li&gt;DelegatingSubject代理类接收到permission后，调用自己的isPermitted方法进行判断。判断分为两步：hasPrincipals &amp;amp;&amp;amp; securityManager.isPermitted(getPrincipals(),permission)。首先是判断用户的身份信息是否存在切有效，第二步是判断用户的凭证信息和用户所要请求的权限是否符合。&lt;/li&gt;
&lt;li&gt;AuthorizingSecurityManager调用this.authorizer.isPermitted(principals,permission)进行判断，返回一个布尔值。authorizer在AuthorizingSecurityManager的构造函数中就被new，就是ModularRealmAuthorizer。&lt;/li&gt;
&lt;li&gt;ModularRealmAuthorizer接收到参数后，遍历realm，进行权限判断。((Authorizer) realm).isPermitted(principals, permission)。&lt;/li&gt;
&lt;li&gt;上面的isPermitted方法是定义在AuthorizingRealm中的，自定义的realm都要继承这个类，也就是说自定义的realm都有这个判断的方法。realm内部首先会拿着principals去获取到用户的权限信息AuthorizationInfo，然后对权限信息进行遍历查找，看看permission是否存在于info中，如果存在就返回true。&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;AuthorizationTest&quot;&gt;&lt;a href=&quot;#AuthorizationTest&quot; class=&quot;headerlink&quot; title=&quot;AuthorizationTest&quot;&gt;&lt;/a&gt;AuthorizationTest&lt;/h2&gt;&lt;p&gt;传入权限标识符，返回一个布尔值，表示是否有这个权限。&lt;/p&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// isPermitted里面传入的是权限标识符&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;subject.isPermitted(&lt;span class=&quot;string&quot;&gt;&quot;user:create:1&quot;&lt;/span&gt;);&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;DelegatingSubject&quot;&gt;&lt;a href=&quot;#DelegatingSubject&quot; class=&quot;headerlink&quot; title=&quot;DelegatingSubject&quot;&gt;&lt;/a&gt;DelegatingSubject&lt;/h2&gt;&lt;p&gt;权限标识符传入后，进行两个判断，一个是当前是否存在这个身份信息，另外一个是这个用户是否有这个权限，两个都是true才返回true，权限认证通过&lt;/p&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;19&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;20&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;21&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;22&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;23&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;24&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;25&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;26&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;27&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;28&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;29&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;30&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// String类型的权限标识符&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;isPermitted&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(String permission)&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; hasPrincipals() &amp;amp;&amp;amp; securityManager.isPermitted(getPrincipals(), permission);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 权限&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;isPermitted&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(Permission permission)&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; hasPrincipals() &amp;amp;&amp;amp; securityManager.isPermitted(getPrincipals(), permission);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 是否有用户凭证信息，也就是用户是否存在的意思&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;hasPrincipals&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; !CollectionUtils.isEmpty(getPrincipals());&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 返回主身份信息吗？只返回了集合中的第一个&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; PrincipalCollection &lt;span class=&quot;title&quot;&gt;getPrincipals&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    List&amp;lt;PrincipalCollection&amp;gt; runAsPrincipals = getRunAsPrincipalsStack();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; CollectionUtils.isEmpty(runAsPrincipals) ? &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.principals : runAsPrincipals.get(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 从session中获取用户的身份凭证信息&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;@SuppressWarnings&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;unchecked&quot;&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt; List&amp;lt;PrincipalCollection&amp;gt; &lt;span class=&quot;title&quot;&gt;getRunAsPrincipalsStack&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    Session session = getSession(&lt;span class=&quot;keyword&quot;&gt;false&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (session != &lt;span class=&quot;keyword&quot;&gt;null&lt;/span&gt;) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; (List&amp;lt;PrincipalCollection&amp;gt;) session.getAttribute(RUN_AS_PRINCIPALS_SESSION_KEY);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;null&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;AuthorizingSecurityManager&quot;&gt;&lt;a href=&quot;#AuthorizingSecurityManager&quot; class=&quot;headerlink&quot; title=&quot;AuthorizingSecurityManager&quot;&gt;&lt;/a&gt;AuthorizingSecurityManager&lt;/h2&gt;&lt;p&gt;调用ModularRealmAuthorizer中的权限判断方法&lt;/p&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt; Authorizer authorizer;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 构造函数中就new了一个ModularRealmAuthorizer&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;AuthorizingSecurityManager&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;super&lt;/span&gt;();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.authorizer = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; ModularRealmAuthorizer();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;isPermitted&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(PrincipalCollection principals, String permissionString)&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.authorizer.isPermitted(principals, permissionString);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;isPermitted&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(PrincipalCollection principals, Permission permission)&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.authorizer.isPermitted(principals, permission);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;ModularRealmAuthorizer&quot;&gt;&lt;a href=&quot;#ModularRealmAuthorizer&quot; class=&quot;headerlink&quot; title=&quot;ModularRealmAuthorizer&quot;&gt;&lt;/a&gt;ModularRealmAuthorizer&lt;/h2&gt;&lt;p&gt;遍历realm集合，只要有一个realm判断认证通过，就返回true，这边的realm可以是自己设置进去的。&lt;br&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;19&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;20&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;21&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;22&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;23&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;24&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;isPermitted&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(PrincipalCollection principals, String permission)&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    assertRealmsConfigured();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (Realm realm : getRealms()) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (!(realm &lt;span class=&quot;keyword&quot;&gt;instanceof&lt;/span&gt; Authorizer)) &lt;span class=&quot;keyword&quot;&gt;continue&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (((Authorizer) realm).isPermitted(principals, permission)) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;true&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;false&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;isPermitted&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(PrincipalCollection principals, Permission permission)&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    assertRealmsConfigured();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (Realm realm : getRealms()) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (!(realm &lt;span class=&quot;keyword&quot;&gt;instanceof&lt;/span&gt; Authorizer)) &lt;span class=&quot;keyword&quot;&gt;continue&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// 调用realm来进行授权的查询，只要一个满足就返回true&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (((Authorizer) realm).isPermitted(principals, permission)) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;true&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;false&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&quot;AuthorizingRealm&quot;&gt;&lt;a href=&quot;#AuthorizingRealm&quot; class=&quot;headerlink&quot; title=&quot;AuthorizingRealm&quot;&gt;&lt;/a&gt;AuthorizingRealm&lt;/h2&gt;&lt;p&gt;这是realm内部进行权限查询的流程，要求的自定义的realm全部都要继承它。会把用户的身份信息传入进去，然后获取到用户的授权信息，AuthorizerInfo，然后遍历info中的权限信息，只要存在，就返回true。&lt;/p&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;19&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;20&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;21&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;22&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;23&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;24&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;25&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;isPermitted&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(PrincipalCollection principals, String permission)&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    Permission p = getPermissionResolver().resolvePermission(permission);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; isPermitted(principals, p);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;isPermitted&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(PrincipalCollection principals, Permission permission)&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// 这就是在自定义的realm里override的方法&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    AuthorizationInfo info = getAuthorizationInfo(principals);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// 会从info中获取信息&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; isPermitted(permission, info);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;isPermitted&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(Permission permission, AuthorizationInfo info)&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// 取出所有的权限信息然后遍历寻找&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    Collection&amp;lt;Permission&amp;gt; perms = getPermissions(info);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (perms != &lt;span class=&quot;keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; !perms.isEmpty()) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (Permission perm : perms) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (perm.implies(permission)) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;true&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;false&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;授权流程&quot;&gt;&lt;a href=&quot;#授权流程&quot; class=&quot;headerlink&quot; title=&quot;授权流程&quot;&gt;&lt;/a&gt;授权流程&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;shiro拦截到需要权限的url的时候，就传入需要的permission，进行subject.isPermitt
    
    </summary>
    
      <category term="框架" scheme="http://yoursite.com/categories/%E6%A1%86%E6%9E%B6/"/>
    
    
      <category term="shiro" scheme="http://yoursite.com/tags/shiro/"/>
    
  </entry>
  
  <entry>
    <title>shiro认证代码流程</title>
    <link href="http://yoursite.com/2016/08/25/shiro%E8%AE%A4%E8%AF%81%E4%BB%A3%E7%A0%81%E6%B5%81%E7%A8%8B/"/>
    <id>http://yoursite.com/2016/08/25/shiro认证代码流程/</id>
    <published>2016-08-25T01:56:00.000Z</published>
    <updated>2016-08-26T06:16:24.639Z</updated>
    
    <content type="html">&lt;h2 id=&quot;认证流程&quot;&gt;&lt;a href=&quot;#认证流程&quot; class=&quot;headerlink&quot; title=&quot;认证流程&quot;&gt;&lt;/a&gt;认证流程&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;subject提交认证，传过去token参数&lt;/li&gt;
&lt;li&gt;DelegatingSubject代理类调用securityManager.login(this,token)，此方法会通过token查询，获取到一个subject，接下来会对这个subject进行检查，如果没有问题，就把subject的内容塞入到this中，也就是当前调用认证方法的那个subject中，完成副作用。&lt;/li&gt;
&lt;li&gt;DefaultSecurityManager的login方法拿到subject和token参数后，调用父类的方法：authenticate(token)来获取到一个认证信息AuthenticationInfo。接下来会调用createSubject方法，把AuthenticationInfo、token和subject重新组装成一个新的subject，返回。&lt;/li&gt;
&lt;li&gt;AuthenticatingSecurityManager方法中的authenticate(token)方法接收到token后，执行操作，return this.authenticator.authenticate(token)。authenticator在new的时候就自动创建完成，为ModularAuthenticator，返回一个认证信息AuthenticationInfo。&lt;/li&gt;
&lt;li&gt;AbstractAuthenticator方法中会有一个方法info = doAuthenticate(token)，来获取认证信息，ModularAuthenticator方法中写了这个。&lt;/li&gt;
&lt;li&gt;ModularAuthenticator方法继承了抽象类AbstractAuthenticator，拿到token后去realm里查询用户的认证信息，自定义的realm就在这里的集合中，通过注入的方式加入集合，也可以配置认证的三个策略。自定义的realm覆盖重写doGetAuthenticationInfo方法。&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;subject-login-token&quot;&gt;&lt;a href=&quot;#subject-login-token&quot; class=&quot;headerlink&quot; title=&quot;subject.login(token)&quot;&gt;&lt;/a&gt;subject.login(token)&lt;/h2&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 执行认证的提交&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;try&lt;/span&gt; &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    subject.login(token);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125; &lt;span class=&quot;keyword&quot;&gt;catch&lt;/span&gt; (AuthenticationException e) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// TODO Auto-generated catch block&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    e.printStackTrace();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;DelegatingSubject&quot;&gt;&lt;a href=&quot;#DelegatingSubject&quot; class=&quot;headerlink&quot; title=&quot;DelegatingSubject&quot;&gt;&lt;/a&gt;DelegatingSubject&lt;/h2&gt;&lt;p&gt;subject的代理类。&lt;br&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;DelegatingSubject&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;implements&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Subject&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;19&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;20&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;21&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;22&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;23&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;24&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;25&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;26&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;27&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;28&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;29&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;30&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;31&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;32&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;33&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;34&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;35&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;36&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;37&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;38&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;39&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;40&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;41&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;42&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;43&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;login&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(AuthenticationToken token)&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;throws&lt;/span&gt; AuthenticationException &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    clearRunAsIdentitiesInternal();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// subject是返回的已经认证处理过的，根据token去查询出来的subject对象&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    Subject subject = securityManager.login(&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;, token);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// 用户的身份凭证信息&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    PrincipalCollection principals;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    String host = &lt;span class=&quot;keyword&quot;&gt;null&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// 把subject中获取到的凭证信息放进去&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (subject &lt;span class=&quot;keyword&quot;&gt;instanceof&lt;/span&gt; DelegatingSubject) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        DelegatingSubject delegating = (DelegatingSubject) subject;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;//we have to do this in case there are assumed identities - we don&#39;t want to lose the &#39;real&#39; principals:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        principals = delegating.principals;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        host = delegating.host;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125; &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        principals = subject.getPrincipals();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// 如果凭证信息为空，就是没有有效的用户认证信息返回，就抛出异常&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (principals == &lt;span class=&quot;keyword&quot;&gt;null&lt;/span&gt; || principals.isEmpty()) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        String msg = &lt;span class=&quot;string&quot;&gt;&quot;Principals returned from securityManager.login( token ) returned a null or &quot;&lt;/span&gt; +&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                &lt;span class=&quot;string&quot;&gt;&quot;empty value.  This value must be non null and populated with one or more elements.&quot;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; IllegalStateException(msg);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// 有合法的凭证信息，就全部塞到调用login的那个subject中，完成副作用&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.principals = principals;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.authenticated = &lt;span class=&quot;keyword&quot;&gt;true&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (token &lt;span class=&quot;keyword&quot;&gt;instanceof&lt;/span&gt; HostAuthenticationToken) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        host = ((HostAuthenticationToken) token).getHost();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (host != &lt;span class=&quot;keyword&quot;&gt;null&lt;/span&gt;) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.host = host;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    Session session = subject.getSession(&lt;span class=&quot;keyword&quot;&gt;false&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (session != &lt;span class=&quot;keyword&quot;&gt;null&lt;/span&gt;) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.session = decorate(session);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125; &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.session = &lt;span class=&quot;keyword&quot;&gt;null&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;DefaultSecurityManager&quot;&gt;&lt;a href=&quot;#DefaultSecurityManager&quot; class=&quot;headerlink&quot; title=&quot;DefaultSecurityManager&quot;&gt;&lt;/a&gt;DefaultSecurityManager&lt;/h2&gt;&lt;p&gt;这是一个默认的安全管理器。&lt;br&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;19&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;20&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;21&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;22&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;23&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;24&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;25&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; Subject &lt;span class=&quot;title&quot;&gt;login&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(Subject subject, AuthenticationToken token)&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;throws&lt;/span&gt; AuthenticationException &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    AuthenticationInfo info;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;try&lt;/span&gt; &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// 根据token去进行认证，返回一个认证信息，authenticationInfo&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        info = authenticate(token);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125; &lt;span class=&quot;keyword&quot;&gt;catch&lt;/span&gt; (AuthenticationException ae) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;try&lt;/span&gt; &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;// 认证失败就抛出认证失败的异常&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            onFailedLogin(token, ae, subject);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#125; &lt;span class=&quot;keyword&quot;&gt;catch&lt;/span&gt; (Exception e) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (log.isInfoEnabled()) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                log.info(&lt;span class=&quot;string&quot;&gt;&quot;onFailedLogin method threw an &quot;&lt;/span&gt; +&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                        &lt;span class=&quot;string&quot;&gt;&quot;exception.  Logging and propagating original AuthenticationException.&quot;&lt;/span&gt;, e);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;throw&lt;/span&gt; ae; &lt;span class=&quot;comment&quot;&gt;//propagate&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// 如果到这步，说明认证成功，把认证信息、令牌等全部组装成一个新的subject，返回这个已经通过认证的，已登录的subject&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    Subject loggedIn = createSubject(token, info, subject);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    onSuccessfulLogin(token, info, loggedIn);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; loggedIn;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&quot;AuthenticatingSecurityManager&quot;&gt;&lt;a href=&quot;#AuthenticatingSecurityManager&quot; class=&quot;headerlink&quot; title=&quot;AuthenticatingSecurityManager&quot;&gt;&lt;/a&gt;AuthenticatingSecurityManager&lt;/h2&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; AuthenticationInfo &lt;span class=&quot;title&quot;&gt;authenticate&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(AuthenticationToken token)&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;throws&lt;/span&gt; AuthenticationException &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// 值得一提的是这个authenticator是默认的new的一个ModularRealmAuthenticator&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.authenticator.authenticate(token);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;AbstractAuthenticator&quot;&gt;&lt;a href=&quot;#AbstractAuthenticator&quot; class=&quot;headerlink&quot; title=&quot;AbstractAuthenticator&quot;&gt;&lt;/a&gt;AbstractAuthenticator&lt;/h2&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;19&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;20&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;21&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;22&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;23&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;24&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;25&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;26&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;27&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;28&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;29&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;30&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;31&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;32&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;33&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;34&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;35&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;36&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;37&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;38&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;39&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;40&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;41&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;42&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;43&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;44&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;45&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;46&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;47&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;48&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;49&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;50&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;final&lt;/span&gt; AuthenticationInfo &lt;span class=&quot;title&quot;&gt;authenticate&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(AuthenticationToken token)&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;throws&lt;/span&gt; AuthenticationException &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (token == &lt;span class=&quot;keyword&quot;&gt;null&lt;/span&gt;) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; IllegalArgumentException(&lt;span class=&quot;string&quot;&gt;&quot;Method argumet (authentication token) cannot be null.&quot;&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    log.trace(&lt;span class=&quot;string&quot;&gt;&quot;Authentication attempt received for token [&amp;#123;&amp;#125;]&quot;&lt;/span&gt;, token);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    AuthenticationInfo info;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;try&lt;/span&gt; &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// 进行认证，认证信息放到info中，否则抛异常&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        info = doAuthenticate(token);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (info == &lt;span class=&quot;keyword&quot;&gt;null&lt;/span&gt;) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            String msg = &lt;span class=&quot;string&quot;&gt;&quot;No account information found for authentication token [&quot;&lt;/span&gt; + token + &lt;span class=&quot;string&quot;&gt;&quot;] by this &quot;&lt;/span&gt; +&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                    &lt;span class=&quot;string&quot;&gt;&quot;Authenticator instance.  Please check that it is configured correctly.&quot;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; AuthenticationException(msg);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125; &lt;span class=&quot;keyword&quot;&gt;catch&lt;/span&gt; (Throwable t) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        AuthenticationException ae = &lt;span class=&quot;keyword&quot;&gt;null&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (t &lt;span class=&quot;keyword&quot;&gt;instanceof&lt;/span&gt; AuthenticationException) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            ae = (AuthenticationException) t;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (ae == &lt;span class=&quot;keyword&quot;&gt;null&lt;/span&gt;) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;//Exception thrown was not an expected AuthenticationException.  Therefore it is probably a little more&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;//severe or unexpected.  So, wrap in an AuthenticationException, log to warn, and propagate:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            String msg = &lt;span class=&quot;string&quot;&gt;&quot;Authentication failed for token submission [&quot;&lt;/span&gt; + token + &lt;span class=&quot;string&quot;&gt;&quot;].  Possible unexpected &quot;&lt;/span&gt; +&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                    &lt;span class=&quot;string&quot;&gt;&quot;error? (Typical or expected login exceptions should extend from AuthenticationException).&quot;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            ae = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; AuthenticationException(msg, t);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;try&lt;/span&gt; &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            notifyFailure(token, ae);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#125; &lt;span class=&quot;keyword&quot;&gt;catch&lt;/span&gt; (Throwable t2) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (log.isWarnEnabled()) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                String msg = &lt;span class=&quot;string&quot;&gt;&quot;Unable to send notification for failed authentication attempt - listener error?.  &quot;&lt;/span&gt; +&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                        &lt;span class=&quot;string&quot;&gt;&quot;Please check your AuthenticationListener implementation(s).  Logging sending exception &quot;&lt;/span&gt; +&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                        &lt;span class=&quot;string&quot;&gt;&quot;and propagating original AuthenticationException instead...&quot;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                log.warn(msg, t2);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;throw&lt;/span&gt; ae;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    log.debug(&lt;span class=&quot;string&quot;&gt;&quot;Authentication successful for token [&amp;#123;&amp;#125;].  Returned account [&amp;#123;&amp;#125;]&quot;&lt;/span&gt;, token, info);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    notifySuccess(token, info);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; info;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;ModularRealmAuthenticator&quot;&gt;&lt;a href=&quot;#ModularRealmAuthenticator&quot; class=&quot;headerlink&quot; title=&quot;ModularRealmAuthenticator&quot;&gt;&lt;/a&gt;ModularRealmAuthenticator&lt;/h2&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;19&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;20&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;21&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;22&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;23&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;24&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;25&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;26&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;27&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;28&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;protected&lt;/span&gt; AuthenticationInfo &lt;span class=&quot;title&quot;&gt;doAuthenticate&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(AuthenticationToken authenticationToken)&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;throws&lt;/span&gt; AuthenticationException &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    assertRealmsConfigured();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    Collection&amp;lt;Realm&amp;gt; realms = getRealms();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// 判断多个realm还是单个realm&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (realms.size() == &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; doSingleRealmAuthentication(realms.iterator().next(), authenticationToken);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125; &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; doMultiRealmAuthentication(realms, authenticationToken);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 单个realm进行认证 &lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;protected&lt;/span&gt; AuthenticationInfo &lt;span class=&quot;title&quot;&gt;doSingleRealmAuthentication&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(Realm realm, AuthenticationToken token)&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (!realm.supports(token)) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        String msg = &lt;span class=&quot;string&quot;&gt;&quot;Realm [&quot;&lt;/span&gt; + realm + &lt;span class=&quot;string&quot;&gt;&quot;] does not support authentication token [&quot;&lt;/span&gt; +&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                token + &lt;span class=&quot;string&quot;&gt;&quot;].  Please ensure that the appropriate Realm implementation is &quot;&lt;/span&gt; +&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                &lt;span class=&quot;string&quot;&gt;&quot;configured correctly or that the realm accepts AuthenticationTokens of this type.&quot;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; UnsupportedTokenException(msg);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// 这个get方法就是我们自定义realm的时候override的方法&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    AuthenticationInfo info = realm.getAuthenticationInfo(token);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (info == &lt;span class=&quot;keyword&quot;&gt;null&lt;/span&gt;) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        String msg = &lt;span class=&quot;string&quot;&gt;&quot;Realm [&quot;&lt;/span&gt; + realm + &lt;span class=&quot;string&quot;&gt;&quot;] was unable to find account data for the &quot;&lt;/span&gt; +&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                &lt;span class=&quot;string&quot;&gt;&quot;submitted AuthenticationToken [&quot;&lt;/span&gt; + token + &lt;span class=&quot;string&quot;&gt;&quot;].&quot;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; UnknownAccountException(msg);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; info;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;注意的是，ModularRealmAuthenticator中的realm，是有set方法的，在spring中直接通过配置文件注入的方式set进来即可。  &lt;/p&gt;
&lt;h2 id=&quot;多个realm的配置方法&quot;&gt;&lt;a href=&quot;#多个realm的配置方法&quot; class=&quot;headerlink&quot; title=&quot;多个realm的配置方法&quot;&gt;&lt;/a&gt;多个realm的配置方法&lt;/h2&gt;&lt;p&gt;其中也有三种不同的realm认证策略，基本上都是针对多个realm配置的情况。&lt;/p&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 配置认证策略&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;DefaultSecurityManager securityManager = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; DefaultSecurityManager();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;ModularRealmAuthenticator authenticator = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; ModularRealmAuthenticator();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;authenticator.setAuthenticationStrategy(&lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; AllSuccessfulStrategy());&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;securityManager.setAuthenticator(authenticator);&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;ini配置方法&quot;&gt;&lt;a href=&quot;#ini配置方法&quot; class=&quot;headerlink&quot; title=&quot;ini配置方法&quot;&gt;&lt;/a&gt;ini配置方法&lt;/h3&gt;&lt;figure class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;[main]&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;#authenticator&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;authenticator=org.apache.shiro.authc.pam.ModularRealmAuthenticator&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;authenticationStrategy=org.apache.shiro.authc.pam.AtLeastOneSuccessfulStrategy&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;authenticator.authenticationStrategy=$authenticationStrategy&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;securityManager.authenticator=$authenticator&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;spring注入的方法&quot;&gt;&lt;a href=&quot;#spring注入的方法&quot; class=&quot;headerlink&quot; title=&quot;spring注入的方法&quot;&gt;&lt;/a&gt;spring注入的方法&lt;/h3&gt;&lt;figure class=&quot;highlight xml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;&amp;lt;!-- 配置认证策略 --&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;authenticator.authenticationStrategy&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;bean&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;class&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;org.apache.shiro.authc.pam.FirstSuccessfulStrategy&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;认证流程&quot;&gt;&lt;a href=&quot;#认证流程&quot; class=&quot;headerlink&quot; title=&quot;认证流程&quot;&gt;&lt;/a&gt;认证流程&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;subject提交认证，传过去token参数&lt;/li&gt;
&lt;li&gt;DelegatingSubject代理类调用se
    
    </summary>
    
      <category term="框架" scheme="http://yoursite.com/categories/%E6%A1%86%E6%9E%B6/"/>
    
    
      <category term="shiro" scheme="http://yoursite.com/tags/shiro/"/>
    
  </entry>
  
  <entry>
    <title>hexo的4000端口被占用的解决办法</title>
    <link href="http://yoursite.com/2016/08/22/hexo%E7%9A%844000%E7%AB%AF%E5%8F%A3%E8%A2%AB%E5%8D%A0%E7%94%A8%E7%9A%84%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95/"/>
    <id>http://yoursite.com/2016/08/22/hexo的4000端口被占用的解决办法/</id>
    <published>2016-08-22T00:36:19.000Z</published>
    <updated>2016-08-22T00:36:46.460Z</updated>
    
    <content type="html">&lt;p&gt;前几天发现无法访问hexo原来的本地地址，localhost:4000一直在转啊转，进不去，猜测是端口被占用。&lt;br&gt;修改端口的方法是，&lt;code&gt;node_modules\hexo-server&lt;/code&gt;里的index.js文件，&lt;br&gt;&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;/* global hexo */&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&#39;use strict&#39;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; assign = &lt;span class=&quot;built_in&quot;&gt;require&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&#39;object-assign&#39;&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;hexo.config.server = assign(&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  port: &lt;span class=&quot;number&quot;&gt;4001&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  log: &lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  ip: &lt;span class=&quot;string&quot;&gt;&#39;0.0.0.0&#39;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  compress: &lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  header: &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;, hexo.config.server);&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;修改port即可。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;前几天发现无法访问hexo原来的本地地址，localhost:4000一直在转啊转，进不去，猜测是端口被占用。&lt;br&gt;修改端口的方法是，&lt;code&gt;node_modules\hexo-server&lt;/code&gt;里的index.js文件，&lt;br&gt;&lt;figure class=&quot;
    
    </summary>
    
    
      <category term="hexo" scheme="http://yoursite.com/tags/hexo/"/>
    
  </entry>
  
</feed>
